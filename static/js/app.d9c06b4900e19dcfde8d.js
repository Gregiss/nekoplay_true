webpackJsonp([1],{100:function(e,t){},129:function(e,t){},135:function(e,t){},136:function(e,t){},137:function(e,t){},138:function(e,t){},151:function(e,t){},152:function(e,t){},153:function(e,t){},154:function(e,t){},155:function(e,t){},156:function(e,t){},157:function(e,t){},158:function(e,t){},159:function(e,t){},160:function(e,t){},161:function(e,t,s){var a;a=function(e){return function(e){function t(a){if(s[a])return s[a].exports;var i=s[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var s={};return t.m=e,t.c=s,t.p="<%=baseUrl%>/",t(0)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s(1),e.exports=t.default},function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),o=function(e,t,s){for(var a=!0;a;){var i=e,o=t,r=s;a=!1,null===i&&(i=Function.prototype);var n=Object.getOwnPropertyDescriptor(i,o);if(void 0!==n){if("value"in n)return n.value;var l=n.get;if(void 0===l)return;return l.call(r)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,s=r,a=!0,n=c=void 0}},r=s(2),n=a(s(3)),l=a(s(4)),c=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.UICorePlugin),i(t,[{key:"bindEvents",value:function(){this.listenTo(this.core,r.Events.CORE_READY,this.bindPlaybackEvents),this.listenTo(this.core.mediaControl,r.Events.MEDIACONTROL_CONTAINERCHANGED,this.reload),this.listenTo(this.core.mediaControl,r.Events.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,r.Events.MEDIACONTROL_HIDE,this.hideSelectLevelMenu)}},{key:"unBindEvents",value:function(){this.stopListening(this.core,r.Events.CORE_READY),this.stopListening(this.core.mediaControl,r.Events.MEDIACONTROL_CONTAINERCHANGED),this.stopListening(this.core.mediaControl,r.Events.MEDIACONTROL_RENDERED),this.stopListening(this.core.mediaControl,r.Events.MEDIACONTROL_HIDE),this.stopListening(this.core.getCurrentPlayback(),r.Events.PLAYBACK_LEVELS_AVAILABLE),this.stopListening(this.core.getCurrentPlayback(),r.Events.PLAYBACK_LEVEL_SWITCH_START),this.stopListening(this.core.getCurrentPlayback(),r.Events.PLAYBACK_LEVEL_SWITCH_END),this.stopListening(this.core.getCurrentPlayback(),r.Events.PLAYBACK_BITRATE)}},{key:"bindPlaybackEvents",value:function(){var e=this.core.getCurrentPlayback();this.listenTo(e,r.Events.PLAYBACK_LEVELS_AVAILABLE,this.fillLevels),this.listenTo(e,r.Events.PLAYBACK_LEVEL_SWITCH_START,this.startLevelSwitch),this.listenTo(e,r.Events.PLAYBACK_LEVEL_SWITCH_END,this.stopLevelSwitch),this.listenTo(e,r.Events.PLAYBACK_BITRATE,this.updateCurrentLevel),e.levels&&e.levels.length>0&&this.fillLevels(e.levels)}},{key:"reload",value:function(){this.unBindEvents(),this.bindEvents(),this.bindPlaybackEvents()}},{key:"shouldRender",value:function(){if(!this.core.getCurrentContainer())return!1;var e=this.core.getCurrentPlayback();if(!e)return!1;var t=void 0!==e.currentLevel,s=!!(this.levels&&this.levels.length>1);return t&&s}},{key:"render",value:function(){if(this.shouldRender()){var e=r.Styler.getStyleFor(l.default,{baseUrl:this.core.options.baseUrl});this.$el.html(this.template({levels:this.levels,title:this.getTitle()})),this.$el.append(e),this.core.mediaControl.$(".media-control-right-panel").append(this.el),this.highlightCurrentLevel()}return this}},{key:"fillLevels",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?-1:arguments[1];void 0===this.selectedLevelId&&(this.selectedLevelId=t),this.levels=e,this.configureLevelsLabels(),this.render()}},{key:"configureLevelsLabels",value:function(){if(void 0!==this.core.options.levelSelectorConfig){var e=this.core.options.levelSelectorConfig.labelCallback;if(e&&"function"!=typeof e)throw new TypeError("labelCallback must be a function");var t,s,a=this.core.options.levelSelectorConfig.labels,i=a?this.core.options.levelSelectorConfig.labels:{};if(e||a)for(var o in this.levels)s=i[(t=this.levels[o]).id],e?t.label=e(t,s):s&&(t.label=s)}}},{key:"findLevelBy",value:function(e){var t;return this.levels.forEach(function(s){s.id===e&&(t=s)}),t}},{key:"onLevelSelect",value:function(e){return this.selectedLevelId=parseInt(e.target.dataset.levelSelectorSelect,10),this.core.getCurrentPlayback().currentLevel!=this.selectedLevelId&&(this.core.getCurrentPlayback().currentLevel=this.selectedLevelId,this.toggleContextMenu(),e.stopPropagation(),!1)}},{key:"onShowLevelSelectMenu",value:function(e){this.toggleContextMenu()}},{key:"hideSelectLevelMenu",value:function(){this.$(".level_selector ul").hide()}},{key:"toggleContextMenu",value:function(){this.$(".level_selector ul").toggle()}},{key:"buttonElement",value:function(){return this.$(".level_selector button")}},{key:"levelElement",value:function(e){return this.$(".level_selector ul a"+(isNaN(e)?"":'[data-level-selector-select="'+e+'"]')).parent()}},{key:"getTitle",value:function(){return(this.core.options.levelSelectorConfig||{}).title}},{key:"startLevelSwitch",value:function(){this.buttonElement().addClass("changing")}},{key:"stopLevelSwitch",value:function(){this.buttonElement().removeClass("changing")}},{key:"updateText",value:function(e){-1===e?this.buttonElement().text(this.currentLevel?"AUTO ("+this.currentLevel.label+")":"AUTO"):this.buttonElement().text(this.findLevelBy(e).label)}},{key:"updateCurrentLevel",value:function(e){var t=this.findLevelBy(e.level);this.currentLevel=t||null,this.highlightCurrentLevel()}},{key:"highlightCurrentLevel",value:function(){this.levelElement().removeClass("current"),this.currentLevel&&this.levelElement(this.currentLevel.id).addClass("current"),this.updateText(this.selectedLevelId)}},{key:"name",get:function(){return"level_selector"}},{key:"template",get:function(){return(0,r.template)(n.default)}},{key:"attributes",get:function(){return{class:this.name,"data-level-selector":""}}},{key:"events",get:function(){return{"click [data-level-selector-select]":"onLevelSelect","click [data-level-selector-button]":"onShowLevelSelectMenu"}}}],[{key:"version",get:function(){return VERSION}}]),t}();t.default=c,e.exports=t.default},function(t,s){t.exports=e},function(e,t){e.exports='<button data-level-selector-button>\n  Auto\n</button>\n<ul>\n  <% if (title) { %>\n  <li data-title><%= title %></li>\n  <% }; %>\n  <li><a href="#" data-level-selector-select="-1">AUTO</a></li>\n  <% for (var i = 0; i < levels.length; i++) { %>\n    <li><a href="#" data-level-selector-select="<%= levels[i].id %>"><%= levels[i].label %></a></li>\n  <% }; %>\n</ul>\n'},function(e,t,s){(e.exports=s(5)()).push([e.id,".level_selector[data-level-selector]{float:right;margin-top:5px;position:relative}.level_selector[data-level-selector] button{background-color:transparent;color:#fff;font-family:Roboto,Open Sans,Arial,sans-serif;-webkit-font-smoothing:antialiased;border:none;font-size:10px}.level_selector[data-level-selector] button:hover{color:#c9c9c9}.level_selector[data-level-selector] button.changing{-webkit-animation:pulse .5s infinite alternate}.level_selector[data-level-selector]>ul{list-style-type:none;position:absolute;bottom:25px;border:1px solid #000;display:none;background-color:#e6e6e6}.level_selector[data-level-selector] li{font-size:10px}.level_selector[data-level-selector] li[data-title]{background-color:#c3c2c2;padding:5px}.level_selector[data-level-selector] li a{color:#444;padding:2px 10px;display:block;text-decoration:none}.level_selector[data-level-selector] li a:hover{background-color:#555;color:#fff}.level_selector[data-level-selector] li a:hover a{color:#fff;text-decoration:none}.level_selector[data-level-selector] li.current a{color:red}@-webkit-keyframes pulse{0%{color:#fff}50%{color:#ff0101}to{color:#b80000}}",""])},function(e,t){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var s=this[t];s[2]?e.push("@media "+s[2]+"{"+s[1]+"}"):e.push(s[1])}return e.join("")},e.i=function(t,s){"string"==typeof t&&(t=[[null,t,""]]);for(var a={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(a[o]=!0)}for(i=0;i<t.length;i++){var r=t[i];"number"==typeof r[0]&&a[r[0]]||(s&&!r[2]?r[2]=s:s&&(r[2]="("+r[2]+") and ("+s+")"),e.push(r))}},e}}])},e.exports=a(s(38))},164:function(e,t,s){e.exports=s.p+"static/img/UmiDorito.59e0973.png"},165:function(e,t,s){e.exports=s.p+"static/img/Yousoro.d924266.png"},166:function(e,t,s){e.exports=s.p+"static/img/FrostyFridays.1f089ad.png"},167:function(e,t,s){e.exports=s.p+"static/img/TsuyuW.af0a919.png"},168:function(e,t,s){var a=s(169),i=["parse"];e.exports=function(){var e=new Worker(s.p+"37261a220fda83a4badc.worker.js",{name:"[hash].worker.js"});return a(e,i),e}},170:function(e,t){},61:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s(62),s(75),s(76),s(78),s(79),s(80),s(82),s(83),s(85),s(88);var a=s(21),i=s(48),o=s(101),r=s.n(o),n={name:"search",mixins:[i.mixin],data:()=>({data:[],errorLoading:!1,selected:-1,focused:!1}),computed:{country(){return this.$store.state.auth.country},searchInput:{get(){return this.$store.state.searchQuery},set(e){this.$store.commit("SET_SEARCH_QUERY",e)}},matching(){return this.$store.state.searchIds.slice(0,5)},series(){return this.$store.state.series},showResults(){return"search"!==this.$route.name&&!this.errorLoading&&this.matching.length>0&&(this.focused&&this.searchInput.replace(/\W/g,"").length>2||this.selected>-1)}},watch:{matching(e,t){if(-1===this.selected)return;if(this.searchInput.length<3)return void(this.selected=-1);const s=t[this.selected];this.selected=e.findIndex(e=>e===s)},searchInput:r()(function(e,t){const s=e.trim();if(""===s||s===t||s.length<3)return this.$store.commit("SET_SEARCH_IDS",[]);this.$store.dispatch("search",s)},100)},methods:{keydown(e){if(38===e.which){if(""===this.searchInput||this.searchInput.length<3)return;e.preventDefault(),this.selected-=1,this.selected<-1&&(this.selected=this.matching.length-1)}else if(40===e.which){if(""===this.searchInput||this.searchInput.length<3)return;e.preventDefault(),this.selected+=1,this.selected>this.matching.length-1&&(this.selected=-1)}else 27===e.which&&(this.focused=!1,this.selected=-1,this.$refs.input.blur())},focus(){this.focused=!0},blur(){this.selected=-1,this.focused=!1},resultHover({target:e}){this.selected=parseInt(e.dataset.index,10)},resultPress(){this.selected=-1,this.focused=!1,this.searchInput=""},search(){const e=this.searchInput.trim();if(!(""===e||e.length<3)){if(this.selected>-1)this.$router.push(`/series/${this.matching[this.selected]}`),this.searchInput="";else{const t="search"===this.$route.name?"replace":"push";this.$router[t](`/search?q=${e}`)}this.$refs.input.blur(),this.blur()}}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.blur,expression:"blur"}],staticClass:"dib relative"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],ref:"input",staticClass:"br2 br--left input-reset black bg-white bt bb bl br-0 b--silver pa2 box-shadow-umi search-bar",attrs:{type:"text",placeholder:"Search anime"},domProps:{value:e.searchInput},on:{keydown:e.keydown,focus:e.focus,input:function(t){t.target.composing||(e.searchInput=t.target.value)}}}),e._v(" "),e._m(0),e._v(" "),""!==e.searchInput?s("i",{staticClass:"fa fa-times black-80 hover-black absolute pointer clear-search",attrs:{"aria-hidden":"true"},on:{click:function(t){e.searchInput=""}}}):e._e()]),e._v(" "),e.showResults?s("div",{staticClass:"absolute br2 shadow-1 bg-white w-100 mt1"},e._l(e.matching,function(t,a){return s("router-link",{key:t,staticClass:"db no-underline black bb b--black-40 pa2 search-result",class:{selected:e.selected===a},attrs:{to:"/series/"+t,"data-index":a},nativeOn:{mouseover:function(t){return e.resultHover(t)},click:function(t){return e.resultPress(t)}}},[s("img",{staticClass:"v-mid",attrs:{src:e._f("cdnRewrite")(e.series[t].landscape_image.small_url),alt:e.series[t].name}}),e._v(" "),s("span",{staticClass:"truncate dib f6 v-mid"},[e._v(e._s(e.series[t].name))])])}),1):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"br2 br--right pointer button-reset bg-white bt bb br bl-0 b--silver pa2 box-shadow-umi search-btn"},[t("i",{staticClass:"fa fa-search black-80 hover-black",attrs:{"aria-hidden":"true"}})])}]};var c={name:"umi-header",components:{Search:s(0)(n,l,!1,function(e){s(100)},"data-v-247bf182",null).exports},mixins:[i.mixin],data:()=>({menu:!1,roomText:"Click to copy URL:",roomHover:!1}),computed:{username(){return this.$store.state.auth.username},lights(){return this.$store.state.lights},connected(){return this.$store.state.roomConnected},connectedCount(){const e=this.$store.state.connectedCount;return this.roomHover||this.roomMenu?`${e} ${1===e?"person":"people"} connected`:e},room(){return this.$store.state.roomId},roomUrl(){return`${window.location.origin}/room/${this.room.replace("umi//","")}`},isRoomHost(){return this.$store.getters.isRoomHost},roomHostOnly:{get(){return this.$store.state.roomData.hostOnly},set(e){this.$store.dispatch("updateRoomData",{hostOnly:e})}},roomMenu:{get(){return this.$store.state.roomMenu},set(e){this.$store.commit("UPDATE_ROOM_MENU",e)}},routeName(){return this.$store.state.route.name},readExtension(){return this.$store.state.readExtension}},methods:{async logout(){this.menu=!1,await this.$store.dispatch("logout"),this.$router.push("/login")},showMenu(){this.menu=!0},hideMenu(){this.menu=!1},showTogether(){this.roomMenu=!0},hideTogether(){this.roomMenu=!1,this.roomText="Click to copy URL:"},handleRoomClick({target:e}){e.select();const t=document.execCommand("copy");this.roomText=t?"Copied!":"Couldn't copy, press ctrl-c"},leaveRoom(){this.$store.commit("UPDATE_CONNECTED",!1),this.$store.dispatch("leaveRoom"),this.hideTogether()}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"fixed top-0 w-100",class:[e.lights?"z-3":"z-max",{"alt-header":"series"===e.routeName||"media"===e.routeName,"box-shadow-umi":"media"!==e.routeName,"tall-header":!e.readExtension}]},[s("div",{staticClass:"header-container center relative"},[s("div",{staticClass:"logo-container"},[s("router-link",{staticClass:"db no-underline",attrs:{to:"/",exact:""}},[s("img",{staticClass:"logo",attrs:{src:"https://github.com/PassaUmDollar/Youtube-Tv_Vue.js/blob/master/img/logo.png?raw=true",alt:""}})])],1),e._v(" "),s("div",[s("div",{staticClass:"absolute search right-0"},[""!==e.room?s("span",{staticClass:"fa-stack dib pointer",on:{click:e.showTogether,mouseover:function(t){e.roomHover=!0},mouseout:function(t){e.roomHover=!1}}},[s("i",{staticClass:"fa fa-circle fa-stack-2x transparent link menu-circle",class:{active:e.roomMenu}}),e._v(" "),s("i",{staticClass:"fa fa-users fa-stack-1x dark-gray pointer-events-none"})]):e._e(),e._v(" "),""!==e.room?s("span",{staticClass:"relative fl bg-dark-gray white pa1 tc br2 f7 fw7 nowrap counter"},[e._v(e._s(e.connectedCount))]):e._e(),e._v(" "),e.roomMenu?s("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.hideTogether,expression:"hideTogether"}],staticClass:"absolute bg-white shadow-1 br2 pv2 ph3 together-menu"},[s("div",{staticClass:"mb2 cf"},[s("div",{staticClass:"fw6 fl"},[e._v(e._s(e.roomText))]),e._v(" "),e.isRoomHost?s("div",{staticClass:"fr"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.roomHostOnly,expression:"roomHostOnly"}],attrs:{type:"checkbox",id:"hostOnly"},domProps:{checked:Array.isArray(e.roomHostOnly)?e._i(e.roomHostOnly,null)>-1:e.roomHostOnly},on:{change:function(t){var s=e.roomHostOnly,a=t.target,i=!!a.checked;if(Array.isArray(s)){var o=e._i(s,null);a.checked?o<0&&(e.roomHostOnly=s.concat([null])):o>-1&&(e.roomHostOnly=s.slice(0,o).concat(s.slice(o+1)))}else e.roomHostOnly=i}}}),e._v(" "),s("label",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom-center",value:"Enabling this makes it so only you (the host) can control the player. ",expression:"'Enabling this makes it so only you (the host) can control the player. '",modifiers:{"bottom-center":!0}}],attrs:{for:"hostOnly"}},[e._v("Host-only mode "),s("i",{staticClass:"fa fa-question-circle-o black-60",attrs:{"aria-hidden":"true"}})])]):e._e()]),e._v(" "),e.connected?s("input",{directives:[{name:"model",rawName:"v-model",value:e.roomUrl,expression:"roomUrl"}],staticClass:"pa2 w-100 pointer",attrs:{type:"text",readonly:""},domProps:{value:e.roomUrl},on:{click:e.handleRoomClick,input:function(t){t.target.composing||(e.roomUrl=t.target.value)}}}):s("input",{staticClass:"pa2 w-100 i",attrs:{type:"text",value:"Connecting...",readonly:""}}),e._v(" "),s("button",{staticClass:"f6 mt2 fw6 ba b--black-20 bg-white bg-animate hover-bg-light-gray black br2 box-shadow-umi pointer ph3 pv2 tc leave-room",on:{click:e.leaveRoom}},[e._v("Leave room")]),e._v(" "),s("button",{staticClass:"f6 mt2 fw6 ba b--black-20 bg-white bg-animate hover-bg-light-gray black br2 box-shadow-umi pointer ph3 pv2 tc w-15 fr",on:{click:e.hideTogether}},[e._v("Close")])]):e._e(),e._v(" "),s("search")],1)])])])},staticRenderFns:[]};var h={name:"app",components:{"umi-header":s(0)(c,d,!1,function(e){s(99)},"data-v-946271c4",null).exports},data:()=>({loaded:!1,error:!1,updated:localStorage.getItem("updated")||!1}),metaInfo(){return{titleTemplate:"%s - NekoPlay",title:this.error?"Error":"Loading..."}},computed:{connected(){return this.$store.state.roomConnected},room(){return this.$store.state.roomId},roomData(){return this.$store.state.roomData},routeName(){return this.$route.name},routePath(){return this.$route.path},lights(){return this.$store.state.lights},stateError(){return this.$store.state.error},guestMessage(){return this.$store.state.guestMessage},readExtension(){return this.$store.state.readExtension}},methods:{refresh(){location.reload()},dismissError(){this.$store.commit("SET_ERROR",!1)},dismissUpdated(){this.updated=!1,localStorage.removeItem("updated")}},watch:{routePath(){""!==this.room&&this.$store.dispatch("updateRoomData",{route:{name:this.$route.name,path:this.$route.path}})},roomData(e,t){""!==this.room&&("media"!==e.route.name?this.$store.dispatch("updateRoomData",{playing:!1}):e.route.path!==this.$route.path&&this.$router.push({path:e.route.path}))}},async created(){try{await this.$store.dispatch("startSession"),"login"!==this.$route.name&&"future-of-umi"!==this.$route.name&&Object.keys(this.$store.state.auth).length>0&&(!this.$store.state.auth.token||!this.$store.state.auth.expires||new Date>new Date(this.$store.state.auth.expires))&&(await this.$store.dispatch("logout",!0),this.$router.replace(`/login?next=${encodeURIComponent(this.$route.fullPath)}`)),this.loaded=!0}catch(e){this.error=!0}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},["login"!==e.routeName?s("umi-header"):e._e(),e._v(" "),s("div",{staticClass:"fixed top-0 right-0 left-0 center tc pa3 z-max fw6 bg-yellow box-shadow-umi guest-message",class:{active:e.guestMessage}},[e._v("\n    You can't leave the player as a guest while in a room that's controlled by the host.\n  ")]),e._v(" "),"login"!==e.routeName?s("div",{staticClass:"fixed top-1 right-1 z-max"},[e.updated?s("div",{staticClass:"bg-white pa3 shadow-1 br2 notification success"},[e._m(0),e._v(" "),s("router-link",{staticClass:"db f6 fw5 ml1 bg-white ba b--black-20 box-shadow-umi bg-animate hover-bg-light-gray br1 pointer ph2 pv1 tc mb2 black no-underline",attrs:{to:"/changelog"},nativeOn:{click:function(t){return e.dismissUpdated(t)}}},[e._v("View changelog")]),e._v(" "),s("div",{staticClass:"db f6 fw5 ml1 bg-white ba b--black-20 box-shadow-umi bg-animate hover-bg-light-gray br1 pointer ph2 pv1 tc",on:{click:e.dismissUpdated}},[e._v("Dismiss")])],1):e._e(),e._v(" "),e.stateError?s("div",{staticClass:"bg-white pa3 shadow-1 br2 notification error"},[e._m(1),e._v(" "),s("div",{staticClass:"f6 fw5 ml1 bg-white ba b--black-20 box-shadow-umi bg-animate hover-bg-light-gray br1 pointer ph2 pv1 tc mb2",on:{click:e.refresh}},[e._v("Refresh")]),e._v(" "),s("div",{staticClass:"f6 fw5 ml1 bg-white ba b--black-20 box-shadow-umi bg-animate hover-bg-light-gray br1 pointer ph2 pv1 tc",on:{click:e.dismissError}},[e._v("Dismiss")])]):e._e()]):e._e(),e._v(" "),"login"===e.routeName?s("router-view"):s("main",{staticClass:"bg-white center pv1 ph3 mv3",class:{"tall-offset":!e.readExtension}},[e.loaded?s("router-view"):e.error?s("div",[s("img",{staticClass:"fl pr3",attrs:{src:"https://my.mixtape.moe/gazrbv.gif"}}),e._v(" "),s("div",{staticClass:"pt5"},[s("p",{staticClass:"lh-copy"},[s("b",[e._v("Something went wrong when contacting Crunchyroll.")]),e._v(" This probably means it's the weekend and Crunchyroll's servers can't handle the load. Try waiting for a few seconds and refreshing.\n        ")]),e._v(" "),s("button",{staticClass:"fw6 ph6 pv2 input-reset ba b--black-20 bg-white bg-animate hover-bg-blue black hover-white br1 pointer f6 db center",on:{click:e.refresh}},[e._v("Refresh")])])]):s("div",{staticClass:"center tc"},[s("i",{staticClass:"fa fa-circle-o-notch fa-spin fa-3x silver mt5"})])],1),e._v(" "),s("div",{staticClass:"fixed absolute--fill z-4",class:[e.lights?"bg-black-90":"dn"]})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mb3 fw6 tc"},[t("span",{staticClass:"normal"},[this._v("✅")]),this._v(" NekoPlay has updated successfully!")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tc mb3 fw6"},[t("span",{staticClass:"normal"},[this._v("❌")]),this._v(" Something went wrong when contacting Crunchyroll.")])}]};var m=s(0)(h,u,!1,function(e){s(96),s(98)},"data-v-45a03abe",null).exports,p=s(102),v=s(103),f=s.n(v),g=s(104),_=s.n(g),b=s(105),y=s(22),w=s.n(y),C=s(23),E=s.n(C);const k=()=>localStorage.getItem("locale")||"ptBR",I="1.1.20.0",$="ethernet";let A=C.CancelToken.source();function S(e){const t={method:e.method||"get",url:`https://api.crunchyroll.com/${e.route}.${e.version||"0"}.json`,params:e.data?null:Object.assign({},e.params,{locale:k(),version:I,connectivity_type:$}),data:e.data,cancelToken:e.noCancel?null:A.token};return E()(t)}function T(e,t,s){!!j.state.auth.username?s():s(`/login?next=${encodeURIComponent(e.fullPath)}`)}let L=localStorage.getItem("umi-uuid");var x=s(124),R=s.n(x);s(125),s(127);const D={apiKey:"AIzaSyCUktVh5mjlAyr-_1uksCLpuESY5vF-jwg",authDomain:"umi-player.firebaseapp.com",databaseURL:"https://umi-player.firebaseio.com",projectId:"umi-player",storageBucket:"umi-player.appspot.com",messagingSenderId:"688413516796"},O={refs:{},connected:!1,init(){return this.connected?Promise.resolve():new Promise(async(e,t)=>{try{this.app||(this.app=R.a.initializeApp(D)),await this.app.auth().signInAnonymously(),this.connected=!0,e()}catch(e){t(e)}})},getRef(e){return this.refs[e]||(this.refs[e]=this.app.database().ref(e)),this.refs[e]},install(e){Object.defineProperty(e.prototype,"$firebase",{get:()=>O})}};var P=O;const M="media.media_id,media.available,media.available_time,media.collection_id,media.collection_name,media.series_id,media.type,media.episode_number,media.name,media.description,media.screenshot_image,media.created,media.duration,media.playhead,media.bif_url",U="series.series_id,series.name,series.portrait_image,series.landscape_image,series.description,series.in_queue";function N(e,t){Object(C.isCancel)(e)||(H.commit("SET_ERROR",!0),t(e))}a.default.use(b.a);const H=new b.a.Store({state:{auth:localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},malAuth:localStorage.getItem("malAuth")?JSON.parse(localStorage.getItem("malAuth")):{},alAuth:localStorage.getItem("alAuth")?JSON.parse(localStorage.getItem("alAuth")):{},locales:[],series:{},seriesCollections:{},collections:{},collectionMedia:{},media:{},searchIds:[],searchQuery:"",queueData:[],initialHistory:[],recent:[],roomId:"",roomConnected:!1,roomMenu:!1,roomData:{},connectedCount:0,lights:!1,error:!1,expiredSession:"",guestMessage:!1,readExtension:!!localStorage.getItem("readExtension")},actions:{startSession({commit:e,state:t}){const s={access_token:"LNDJgOit5yaRIWN",device_type:"com.crunchyroll.windows.desktop",device_id:(L||(L=w()().toUpperCase(),localStorage.setItem("umi-uuid",L)),L)};return t.auth.token&&(s.auth=t.auth.token),new Promise(async(t,a)=>{try{const i=(await S({route:"start_session",params:s,noCancel:!0})).data.data;e("UPDATE_AUTH",{session_id:i.session_id,country:i.country_code.toLowerCase(),token:i.auth,expires:i.expires}),t();const o=await S({route:"list_locales",version:"1",params:{session_id:i.session_id},noCancel:!0});e("UPDATE_LOCALES",o.data.data.locales)}catch(e){a(e)}})},login({commit:e,state:t,dispatch:s},{username:a,password:i}){const o=new FormData;return o.append("account","cup2010bc@gmail.com"),o.append("password","bakura99"),o.append("session_id",t.auth.session_id),o.append("locale",k()),o.append("version",I),new Promise(async(t,s)=>{try{const a=await S({method:"post",route:"login",data:o});if(a.data.error)throw a;const i=a.data.data;if(-1===i.user.premium.indexOf("anime"))return s(new Error("You must have a premium Crunchyroll account to use Umi."));e("UPDATE_AUTH",{token:i.auth,expires:i.expires,username:i.user.username}),e("SET_EXPIRED_SESSION",""),t()}catch(e){s(e)}})},logout:({commit:e,dispatch:t,state:s},a)=>new Promise(async(i,o)=>{try{a&&e("SET_EXPIRED_SESSION",s.auth.username),e("REMOVE_AUTH"),await t("startSession"),i(),e("SET_INITIAL_HISTORY",[]),e("SET_QUEUE_DATA",[])}catch(e){N(e,o)}}),authenticateMal:({commit:e,state:t},{username:s,password:a})=>new Promise(async(t,i)=>{try{const o=(await E.a.post("https://umi-watch-api.now.sh/mal/login",{username:s,password:a})).data;"ok"===o.status?(e("UPDATE_MAL",o),t()):i(new Error(o.error))}catch(e){i(e)}}),authenticateAniList:({commit:e},{token:t})=>new Promise(async(s,a)=>{try{var i=(await E()({method:"post",url:"https://graphql.anilist.co",headers:{Authorization:`Bearer ${t}`},data:{query:"\n  query {\n    Viewer {\n      name\n    }\n  }\n"}})).data;const o=i.data,r=i.errors;r&&r.length>0?a(new Error(r[0])):(console.log(o),e("UPDATE_AL",{token:t,name:o.Viewer.name}),s())}catch(e){a(e)}}),getQueueInfo({commit:e,state:t},s){const a={session_id:t.auth.session_id,media_types:"anime|drama",fields:[M,U].join(",")};return t.queueData.length>0&&!s?Promise.resolve():new Promise(async(t,s)=>{try{const i=await S({route:"queue",params:a});if(i.data.error)throw i;const o=i.data.data;e("SET_QUEUE_DATA",o),o.forEach(t=>{e("ADD_SERIES",t.series),e("ADD_MEDIA",t.most_likely_media),e("ADD_MEDIA",t.last_watched_media)}),t()}catch(e){N(e,s)}})},getHistoryInfo({commit:e,state:t},{limit:s=24,offset:a=0}={}){const i={session_id:t.auth.session_id,media_types:"anime|drama",fields:[M,U].join(","),limit:s,offset:a};return new Promise(async(t,s)=>{try{const o=await S({route:"recently_watched",params:i});if(o.data.error)throw o;const r=o.data.data;0===a&&e("SET_INITIAL_HISTORY",r),r.forEach(t=>{e("ADD_SERIES",t.series),e("ADD_COLLECTION",t.collection),e("ADD_MEDIA",t.media)}),t(r)}catch(e){N(e,s)}})},getRecentInfo({commit:e,state:t}){const s={session_id:t.auth.session_id,media_type:"anime",fields:[M,"media.series_name","series.most_recent_media"].join(","),limit:50,offset:0,filter:"updated"};return t.recent.length>0?Promise.resolve(t.recent):new Promise(async(t,a)=>{try{const i=await S({route:"list_series",params:s});if(i.data.error)throw i;const o=i.data.data;o.forEach(t=>{e("ADD_MEDIA",t.most_recent_media)}),e("SET_RECENT",o),t(o)}catch(e){N(e,a)}})},search({commit:e,state:t},s){const a={session_id:t.auth.session_id,classes:"series",limit:999,offset:0,media_types:"anime|drama",fields:U,q:s};return new Promise(async(t,s)=>{try{const i=await S({route:"autocomplete",params:a});if(i.data.error)throw i;const o=i.data.data;o.forEach(t=>{e("ADD_SERIES",t)}),e("SET_SEARCH_IDS",o.map(e=>e.series_id)),t()}catch(e){N(e,s)}})},getSeriesInfo({commit:e,state:t},s){const a={session_id:t.auth.session_id,series_id:s,fields:U};return t.series[s]?Promise.resolve():new Promise(async(t,s)=>{try{const i=await S({route:"info",params:a});if(i.data.error)throw i;const o=i.data.data;e("ADD_SERIES",o),t()}catch(e){N(e,s)}})},updateSeriesQueue({commit:e,state:t,dispatch:s},{id:a,queueStatus:i}){const o=new FormData;return o.append("session_id",t.auth.session_id),o.append("locale",k()),o.append("version",I),o.append("series_id",a),e("UPDATE_SERIES_QUEUE",{id:a,queueStatus:i}),new Promise(async(e,t)=>{try{const a=await S({method:"post",route:i?"add_to_queue":"remove_from_queue",data:o});if(a.data.error)throw a;s("getQueueInfo",!0),e()}catch(e){N(e,t)}})},getCollectionsForSeries({commit:e,state:t},s){const a={session_id:t.auth.session_id,series_id:s,limit:5e3,offset:0};return t.seriesCollections[s]?Promise.resolve():new Promise(async(t,i)=>{try{const o=await S({route:"list_collections",params:a});if(o.data.error)throw o;const r=o.data.data;r.forEach(t=>{e("ADD_COLLECTION",t)}),e("ADD_SERIES_COLLECTION",{id:s,arr:r.map(e=>e.collection_id)}),t()}catch(e){N(e,i)}})},getMediaForCollection({commit:e,state:t},s){const a={session_id:t.auth.session_id,collection_id:s,include_clips:1,limit:5e3,offset:0,fields:M};return t.collectionMedia[s]?Promise.resolve():new Promise(async(t,i)=>{try{const o=await S({route:"list_media",params:a});if(o.data.error)throw o;const r=o.data.data;r.forEach(t=>{e("ADD_MEDIA",t)}),e("ADD_COLLECTION_MEDIA",{id:s,arr:r.map(e=>e.media_id)}),t()}catch(e){N(e,i)}})},getCollectionInfo({commit:e,state:t},s){const a={session_id:t.auth.session_id,collection_id:s};return t.media[s]?Promise.resolve():new Promise(async(t,s)=>{try{const i=await S({route:"info",params:a});if(i.data.error)throw i;const o=i.data.data;e("ADD_COLLECTION",o),t()}catch(e){N(e,s)}})},getMediaInfo({commit:e,state:t,dispatch:s},a){const i={session_id:t.auth.session_id,media_id:a,fields:M};return t.media[a]?Promise.resolve():new Promise(async(t,s)=>{try{const a=await S({route:"info",params:i});if(a.data.error)throw a;const o=a.data.data;e("ADD_MEDIA",o),t()}catch(e){N(e,s)}})},leaveRoom({state:e,commit:t}){const s=P.getRef(`/rooms/${e.roomId}`),a=P.getRef(`/roomUsers/${e.roomId}`),i=P.getRef(`/roomUsers/${e.roomId}/${P.app.auth().currentUser.uid}`);s.off(),a.off(),i.remove(),t("UPDATE_ROOM",""),t("UPDATE_CONNECTED",!1),t("UPDATE_CONNECTED_COUNT",1)},enterRoom:({state:e,commit:t},{id:s=w()()})=>(t("UPDATE_ROOM",s),new Promise(async(a,i)=>{try{await P.init();const o=P.getRef(`/rooms/${s}`),r=P.getRef(`/roomUsers/${s}`),n=P.getRef(`/roomUsers/${s}/${P.app.auth().currentUser.uid}`);await n.set(!0),n.onDisconnect().remove();const l=await o.once("value"),c=l.val()||{playing:!1,syncedTime:0,host:P.app.auth().currentUser.uid,hostOnly:!1,route:{path:e.route.path,name:e.route.name}};l.val()||await o.set(c),o.on("value",e=>{t("UPDATE_ROOM_DATA",e.val())}),t("UPDATE_CONNECTED",!0),r.on("value",e=>{e.exists()&&t("UPDATE_CONNECTED_COUNT",Object.keys(e.val()).length)}),a(c)}catch(e){i(e)}})),updateRoomData:({state:e,getters:t},s)=>e.roomData.hostOnly&&!t.isRoomHost?Promise.resolve():new Promise(async(t,a)=>{try{const i=P.getRef(`/rooms/${e.roomId}`);await i.update(s),t()}catch(e){a(e)}}),flashGuestMessage({state:e,commit:t}){e.guestMessage||(t("UPDATE_GUEST_MESSAGE",!0),setTimeout(()=>{t("UPDATE_GUEST_MESSAGE",!1)},5e3))}},mutations:{UPDATE_AUTH(e,t){const s=Object.assign({},e.auth,t);localStorage.setItem("auth",JSON.stringify(s)),a.default.set(e,"auth",s)},UPDATE_LOCALES(e,t){e.locales=t},REMOVE_AUTH(e){localStorage.removeItem("auth"),a.default.set(e,"auth",{})},UPDATE_MAL(e,t){const s=Object.assign({},e.malAuth,t);localStorage.setItem("malAuth",JSON.stringify(s)),a.default.set(e,"malAuth",s)},REMOVE_MAL_AUTH(e){localStorage.removeItem("malAuth"),a.default.set(e,"malAuth",{})},UPDATE_AL(e,t){const s=Object.assign({},e.alAuth,t);localStorage.setItem("alAuth",JSON.stringify(s)),a.default.set(e,"alAuth",s)},REMOVE_AL_AUTH(e){localStorage.removeItem("alAuth"),a.default.set(e,"alAuth",{})},SET_SEARCH_IDS(e,t){e.searchIds=t},SET_SEARCH_QUERY(e,t){e.searchQuery=t},SET_QUEUE_DATA(e,t){a.default.set(e,"queueData",t)},SET_INITIAL_HISTORY(e,t){a.default.set(e,"initialHistory",t)},SET_RECENT(e,t){a.default.set(e,"recent",t)},ADD_SERIES(e,t){t&&t.series_id&&a.default.set(e.series,t.series_id,t)},ADD_SERIES_COLLECTION(e,{id:t,arr:s}){s&&a.default.set(e.seriesCollections,t,s)},ADD_COLLECTION(e,t){t&&t.collection_id&&a.default.set(e.collections,t.collection_id,t)},ADD_COLLECTION_MEDIA(e,{id:t,arr:s}){s&&a.default.set(e.collectionMedia,t,s)},ADD_MEDIA(e,t){t&&t.media_id&&a.default.set(e.media,t.media_id,t)},UPDATE_ROOM(e,t){e.roomId=t},UPDATE_ROOM_DATA(e,t){a.default.set(e,"roomData",t)},UPDATE_CONNECTED(e,t){e.roomConnected=t},UPDATE_CONNECTED_COUNT(e,t){e.connectedCount=t},UPDATE_ROOM_MENU(e,t){e.roomMenu=t},UPDATE_SERIES_QUEUE(e,{id:t,queueStatus:s}){a.default.set(e.series[t],"in_queue",s)},UPDATE_LIGHTS(e,t){e.lights=t},SET_ERROR(e,t){e.error=t},SET_EXPIRED_SESSION(e,t){e.expiredSession=t},UPDATE_GUEST_MESSAGE(e,t){e.guestMessage=t},SET_READ_EXTENSION(e){localStorage.setItem("readExtension","true"),e.readExtension=!0}},getters:{isRoomHost:e=>e.roomConnected&&e.roomData.host===P.app.auth().currentUser.uid}});var j=H,q=s(130),F=s.n(q),Y=s(133),z=s.n(Y),B=s(134),Q=s.n(B),W={name:"media-item",props:["id","collectionName","size","selected","noBorder"],computed:{data(){return this.$store.state.media[this.id]},playheadStyle(){return{width:`${Math.min(100,this.data.playhead/this.data.duration*100)}%`}},isRoomGuest(){return this.$store.state.roomConnected&&this.$store.state.roomData.hostOnly&&!this.$store.getters.isRoomHost}}},V={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.data.available?s("router-link",{staticClass:"black",class:{"pointer-events-none o-60":e.isRoomGuest},attrs:{to:"/series/"+e.data.series_id+"/"+e.id}},[s("div",{staticClass:"media-item dib v-top h-100 mr3 mb2 br2 bg-white",class:[{"hide-child":!e.selected},e.size],on:{click:function(t){return e.$emit("click")}}},[s("div",{staticClass:"relative"},[e.data.screenshot_image?s("img",{staticClass:"w-100 image-size br2 br--top",attrs:{src:e._f("cdnRewrite")(e.data.screenshot_image.full_url)}}):s("div",{staticClass:"w-100 image-size tc placeholder-image bg-light-gray"},[s("i",{staticClass:"fa fa-question-circle-o black-40 missing-icon",attrs:{"aria-hidden":"true"}})]),e._v(" "),s("div",{staticClass:"bg-gray playhead playhead-container"},[s("div",{staticClass:"bg-blue playhead",style:e.playheadStyle})]),e._v(" "),s("div",{staticClass:"child absolute bg-black-40 top-0 image-size br2 br--top"},[s("i",{staticClass:"fa fa-play white tc play-icon",attrs:{"aria-hidden":"true"}})])]),e._v(" "),s("div",{staticClass:"pa2"},[e.collectionName?s("div",[s("span",{staticClass:"truncate db fw6 mb1 lh-copy"},[e._v(e._s(e.collectionName))]),e._v(" "),s("small",{staticClass:"gray truncate db lh-copy"},[e._v("#"+e._s(e.data.episode_number)+" • "+e._s(e.data.name))])]):s("div",[""!==e.data.episode_number?s("span",{staticClass:"truncate db fw6 mb1 lh-copy"},[e._v("Episode "+e._s(e.data.episode_number))]):s("span",{staticClass:"truncate db fw6 mb1 lh-copy"},[e._v(e._s(e.data.name))]),e._v(" "),""!==e.data.episode_number?s("small",{staticClass:"gray truncate db lh-copy"},[e._v(e._s(e.data.name))]):s("small",{staticClass:"gray truncate db lh-copy"},[e._v(" ")])])])])]):e._e()},staticRenderFns:[]};var G=s(0)(W,V,!1,function(e){s(135)},"data-v-355ec91f",null).exports,K={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"center mt3 loading-section"},[t("div",{staticClass:"tc"},[t("i",{staticClass:"fa fa-circle-o-notch fa-spin fa-3x silver"})])])}]};var J={name:"dashboard",metaInfo:{title:"Home"},components:{MediaItem:G,DashboardLoadingSection:s(0)(null,K,!1,function(e){s(136)},"data-v-082c032b",null).exports},data:()=>({splits:{}}),computed:{name(){return this.$store.state.auth.username},collections(){return this.$store.state.collections},queue(){return this.$store.state.queueData.filter(e=>e.most_likely_media.available).sort((e,t)=>new Date(t.most_likely_media.available_time)-new Date(e.most_likely_media.available_time)).slice(0,4)},history(){const e={};return this.$store.state.initialHistory.forEach(t=>{const s=t.series.series_id;e[s]||(e[s]=t)}),Object.values(e).sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)).slice(0,4)}},methods:{async getRecent(){const e=await this.$store.dispatch("getRecentInfo"),t=Object.assign({},this.splits);e.map(e=>e.most_recent_media).forEach(e=>{if(F()(e.available_time))t.Today||(t.Today=[]),t.Today.push(e);else if(z()(e.available_time))t.Yesterday||(t.Yesterday=[]),t.Yesterday.push(e);else{const s=`${Q()(new Date,e.available_time)} days ago`;t[s]||(t[s]=[]),t[s].push(e)}}),this.splits=t}},async created(){this.$store.dispatch("getHistoryInfo"),this.$store.dispatch("getQueueInfo"),this.getRecent()}},X={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"dashboard-section"},[e._m(0),e._v(" "),0!==Object.keys(e.splits).length?s("div",e._l(e.splits,function(t,a){return s("div",{key:a},[s("h3",{staticClass:"fw4 near-black pb2 bb b--silver"},[e._v(e._s(a))]),e._v(" "),s("div",{staticClass:"center"},e._l(t,function(e){return s("media-item",{key:e.media_id,attrs:{id:e.media_id,collectionName:e.series_name,size:"dashboard"}})}),1)])}),0):s("dashboard-loading-section")],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"fw4 mv0 pb3 bb"},[t("i",{staticClass:"fa fa-calendar-o mr1",attrs:{"aria-hidden":"true"}}),this._v(" Recent")])}]};var Z=s(0)(J,X,!1,function(e){s(129)},"data-v-22bfe846",null).exports,ee={mounted(){var e=this.$route.query;const t=e.info,s=e.route;if(!t)return this.$router.replace("/");try{const e=JSON.parse(t);Object.keys(e).forEach(t=>{let s=t;t.contains("clappr")&&(s=t.replace("umi.bruggie.com","umi.party")),localStorage.setItem(s,e[t])}),localStorage.setItem("new-domain",!0),location.replace(s||"/")}catch(e){location.replace("/")}}},te={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"center tc"},[t("i",{staticClass:"fa fa-circle-o-notch fa-spin fa-3x silver mt5"})])}]},se=s(0)(ee,te,!1,null,null,null).exports,ae=s(139),ie=s.n(ae),oe={props:["data"],computed:{parsedTime(){return ie()(this.data.most_likely_media.available_time)},playheadStyle(){return{width:`${Math.min(100,this.data.most_likely_media.playhead/this.data.most_likely_media.duration*100)}%`}}}},re={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.data.most_likely_media.available?s("router-link",{staticClass:"link black",attrs:{to:"/series/"+e.data.most_likely_media.series_id+"/"+e.data.most_likely_media.media_id}},[s("div",{staticClass:"w-100 mb2 pa3 cf hide-child br2 ba b--near-white box-shadow-umi"},[s("div",{staticClass:"fl w-20 relative"},[s("img",{staticClass:"v-mid image-size",attrs:{src:e._f("cdnRewrite")(e.data.most_likely_media.screenshot_image.thumb_url)}}),e._v(" "),s("div",{staticClass:"bg-gray mt1 playhead"},[s("div",{staticClass:"bg-blue playhead",style:e.playheadStyle})]),e._v(" "),s("div",{staticClass:"child absolute bg-black-40 top-0 image-size"},[s("i",{staticClass:"fa fa-play white tc play-icon",attrs:{"aria-hidden":"true"}})])]),e._v(" "),s("div",{staticClass:"fl w-80"},[s("strong",{staticClass:"fw6"},[e._v(e._s(e.data.series.name))]),e._v(" "),s("br"),e._v(" "),s("small",{staticClass:"gray"},[e._v("Next up: Episode "+e._s(e.data.most_likely_media.episode_number)+" — "+e._s(e.data.most_likely_media.name))]),e._v(" "),s("p",{staticClass:"lh-copy f6"},[e._v(e._s(e.data.most_likely_media.description))])])])]):s("router-link",{staticClass:"link black",attrs:{to:"/series/"+e.data.most_likely_media.series_id}},[s("div",{staticClass:"bg-near-white w-100 mb2 pa3 cf bb bw2 b--light-gray hide-child"},[s("div",{staticClass:"fl w-20 relative"},[s("img",{staticClass:"v-mid image-size",attrs:{src:e._f("cdnRewrite")(e.data.series.landscape_image.thumb_url)}}),e._v(" "),s("div",{staticClass:"child absolute bg-black-40 top-0 image-size"},[s("i",{staticClass:"fa fa-clock-o white tc play-icon",attrs:{"aria-hidden":"true"}})])]),e._v(" "),s("div",{staticClass:"fl w-80"},[s("strong",{staticClass:"fw6"},[e._v(e._s(e.data.series.name))]),e._v(" "),s("br"),e._v(" "),s("small",{staticClass:"gray"},[e._v("Next up: Episode "+e._s(e.data.most_likely_media.episode_number))]),e._v(" "),s("p",{staticClass:"lh-copy f6"},[e._v("Available to watch in "+e._s(e.parsedTime))])])])])},staticRenderFns:[]};var ne=s(0)(oe,re,!1,function(e){s(138)},"data-v-a1438ed0",null).exports,le={name:"queue",metaInfo:{title:"Queue"},data:()=>({requested:!1,sort:localStorage.getItem("queue-sort")||"recent"}),computed:{data(){return this.$store.state.queueData},loaded(){return this.data.length>0||0===this.data.length&&this.requested},sortedData(){return"recent"===this.sort?this.data.slice(0).sort((e,t)=>new Date(t.most_likely_media.available_time)-new Date(e.most_likely_media.available_time)):this.data}},components:{QueueItem:ne},methods:{sortQueue({target:e}){this.sort=e.dataset.sort,localStorage.setItem("queue-sort",e.dataset.sort)}},async created(){const e=this.$store;await e.dispatch("getQueueInfo"),this.requested=!0}},ce={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"relative cf mb2"},[s("div",{staticClass:"fr"},[s("div",{staticClass:"fw5 ph3 pv2 bg-white pointer f6 dib",class:{"bb bw1 b--blue":"recent"===e.sort},attrs:{"data-sort":"recent"},on:{click:e.sortQueue}},[e._v("Recently updated")]),e._v(" "),s("div",{staticClass:"fw5 ph3 pv2 bg-white pointer f6 dib",class:{"bb bw1 b--blue":"order"===e.sort},attrs:{"data-sort":"order"},on:{click:e.sortQueue}},[e._v("Queue order")])])]),e._v(" "),e.loaded?s("div",e._l(e.sortedData,function(e){return s("queue-item",{key:e.queue_entry_id,attrs:{data:e}})}),1):s("div",e._l(10,function(t){return s("div",{key:t,staticClass:"bg-near-white w-100 mb2 pa3 cf bb bw2 b--light-gray"},[e._m(0,!0)])}),0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"animated-background"},[t("div",{staticClass:"bg-near-white absolute mask vid-sep"}),this._v(" "),t("div",{staticClass:"bg-near-white absolute mask vid-below-line"}),this._v(" "),t("div",{staticClass:"bg-near-white absolute mask desc-sep"}),this._v(" "),t("div",{staticClass:"bg-near-white absolute mask line-1-sep"})])}]};var de=s(0)(le,ce,!1,function(e){s(137)},"data-v-7a52f9f4",null).exports,he={name:"settings",metaInfo:{title:"Settings"},data:()=>({malUsername:"",malPassword:"",malLoading:!1,malError:!1,savedLocale:!1,selectedLocale:k()}),async created(){if(""===this.$route.hash)return;const e=this.$route.hash.replace(/^#/,"").split("&").map(e=>e.split("=")).reduce((e,t)=>(e[t[0]]=t[1],e),{}).access_token;e&&(await this.$store.dispatch("authenticateAniList",{token:e}),this.$router.replace("/settings"))},computed:{malAuth(){return this.$store.state.malAuth},alAuth(){return this.$store.state.alAuth},locales(){return this.$store.state.locales},anilistUrl:()=>"https://anilist.co/api/v2/oauth/authorize?client_id=1234&response_type=token"},watch:{selectedLocale(e){localStorage.setItem("locale",e),this.savedLocale||(this.savedLocale=!0,setTimeout(()=>{this.savedLocale=!1},2e3))}},methods:{async loginMal(){this.malError=!1,this.malLoading=!0;try{await this.$store.dispatch("authenticateMal",{username:this.malUsername,password:this.malPassword}),this.malLoading=!1,this.malUsername="",this.malPassword=""}catch(e){this.malLoading=!1,this.malError=!0}},logoutMal(){this.$store.commit("REMOVE_MAL_AUTH")},logoutAnilist(){this.$store.commit("REMOVE_AL_AUTH")}}},ue={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mt2"},[e._m(0),e._v(" "),s("div",{staticClass:"cf"},[e._m(1),e._v(" "),s("div",{staticClass:"fr"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedLocale,expression:"selectedLocale"}],staticClass:"h2 br1 ba b--black-20 bg-white mt3",attrs:{name:"locale"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedLocale=t.target.multiple?s:s[0]}}},e._l(e.locales,function(t){return s("option",{key:t.locale_id,domProps:{value:t.locale_id}},[e._v(e._s(t.label))])}),0),e._v(" "),s("div",{staticClass:"green mt1 absolute save-message",class:[e.savedLocale?"o-100":"o-0"]},[e._v("Saved!")])])]),e._v(" "),e._m(2),e._v(" "),s("div",{staticClass:"cf"},[s("div",{staticClass:"fl pv2"},[s("span",{staticClass:"mal-icon mr1"}),e._v(" "),s("span",{staticClass:"fw5"},[e._v("AniList")]),e._v(" "),e.alAuth.name?s("span",[e._v("("+e._s(e.alAuth.name)+")")]):e._e()]),e._v(" "),""!==e.$route.hash?s("div",{staticClass:"fr"},[s("span",{staticClass:"fw5"},[e._v("Authenticating...")])]):e.alAuth.name?s("div",{staticClass:"fr"},[s("button",{staticClass:"fw6 ph3 pv2 ba b--black-20 bg-white bg-animate hover-bg-light-gray black br2 box-shadow-umi pointer f6 dib",on:{click:e.logoutAnilist}},[e._v("Sign out")])]):s("div",{staticClass:"fr"},[s("a",{staticClass:"link fw6 ph3 pv2 ba b--black-20 bg-white bg-animate hover-bg-light-gray black br2 box-shadow-umi f6 dib",attrs:{href:e.anilistUrl}},[e._v("Sign in with AniList")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"fw5 bb pb2 b--dark-gray"},[t("i",{staticClass:"fa fa-user mr1"}),this._v(" Profile")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl mt2"},[t("span",{staticClass:"fw5"},[this._v("Content language")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"fw5 bb pb2 b--dark-gray"},[t("i",{staticClass:"fa fa-link mr1"}),this._v(" Connections")])}]};var me=s(0)(he,ue,!1,function(e){s(151)},"data-v-45e97b7b",null).exports,pe={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loading-media-item dib v-top h-100 bg-near-white mr3 mb2 pa2 bb bw2 b--light-gray"},[t("div",{staticClass:"animated-background"},[t("div",{staticClass:"bg-near-white absolute mask vid-sep"}),this._v(" "),t("div",{staticClass:"bg-near-white absolute mask right-block"}),this._v(" "),t("div",{staticClass:"bg-near-white absolute mask line-block-1"}),this._v(" "),t("div",{staticClass:"bg-near-white absolute mask line-block-2"})])])}]};var ve=s(0)(null,pe,!1,function(e){s(153)},"data-v-0efda986",null).exports,fe={name:"home",metaInfo:{title:"History"},data:()=>({data:[],paginationLoading:!1,offset:0}),computed:{allData(){return this.$store.state.initialHistory.concat(this.data)}},components:{MediaItem:G,LoadingMediaItem:ve},methods:{async handlePagination(){this.paginationLoading=!0,this.offset+=24;const e=await this.$store.dispatch("getHistoryInfo",{offset:this.offset});this.data=this.data.concat(e),this.paginationLoading=!1}},created(){this.$store.dispatch("getHistoryInfo")}},ge={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mt2"},[e.allData.length>0?s("div",{staticClass:"center container-width"},[e._l(e.allData,function(e){return s("media-item",{key:e.media.media_id,attrs:{id:e.media.media_id,collectionName:e.collection.name,size:"medium"}})}),e._v(" "),s("div",{staticClass:"f5 fw6 db ba b--black-20 bg-animate hover-bg-light-gray black br1 pointer pa3 tc more-btn box-shadow-umi",class:[e.paginationLoading?"bg-light-gray":"bg-white"],on:{click:e.handlePagination}},[e._v("\n      "+e._s(e.paginationLoading?"Loading...":"Load more")+"\n    ")])],2):s("div",{staticClass:"center container-width"},e._l(15,function(e){return s("loading-media-item",{key:e})}),1)])},staticRenderFns:[]};var _e=s(0)(fe,ge,!1,function(e){s(152)},"data-v-074efe2e",null).exports,be={name:"series-item",props:["id","noMargin"],computed:{data(){return this.$store.state.series[this.id]}}},ye={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.data?s("router-link",{staticClass:"link",attrs:{to:"/series/"+e.id}},[s("div",{staticClass:"dib mb2 hide-child relative bg-near-white series-item",class:{mr3:e.noMargin}},[s("img",{attrs:{src:e._f("cdnRewrite")(e.data.portrait_image.thumb_url)}}),e._v(" "),s("div",{staticClass:"child absolute absolute--fill bg-black-60 pa2"},[s("p",{staticClass:"b white tc f5"},[e._v(e._s(e.data.name))])])])]):e._e()},staticRenderFns:[]};var we=s(0)(be,ye,!1,function(e){s(155)},"data-v-43334533",null).exports,Ce={name:"search",metaInfo(){return{title:`Search: "${this.query}"`}},components:{SeriesItem:we},data:()=>({loading:!1}),computed:{searchIds(){return this.$store.state.searchIds},query(){return this.$route.query.q},stateQuery(){return this.$store.state.searchQuery.trim()}},watch:{stateQuery(e,t){e!==t&&e.trim().length>2&&(this.loading=!0)},searchIds(){this.$router.replace(Object.assign({},this.$route,{query:{q:this.stateQuery}})),this.loading=!1}},async created(){const e=this.$store,t=this.query;if(!t)return this.$router.go(-1);0===this.searchIds.length&&(this.loading=!0),""===this.stateQuery&&e.commit("SET_SEARCH_QUERY",t),await e.dispatch("search",t),this.loading=!1},destroyed(){this.$store.commit("SET_SEARCH_QUERY",""),this.$store.commit("SET_SEARCH_IDS",[])}},Ee={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"tr mv2"},[e.loading&&e.searchIds.length>0?s("span",{staticClass:"small-caps"},[e._v("Loading...")]):e.searchIds.length>0?s("span",{staticClass:"small-caps"},[e._v(e._s(e.searchIds.length)+" result"+e._s(1!==e.searchIds.length?"s":""))]):e._e()]),e._v(" "),s("div",{staticClass:"center results-container"},[e._l(e.searchIds,function(e){return s("series-item",{key:e,staticClass:"pr1",attrs:{id:e}})}),e._v(" "),e.loading&&0===e.searchIds.length?s("h3",{staticClass:"fw5 dark-gray tc"},[e._v("Loading...")]):e._e(),e._v(" "),0!==e.searchIds.length||e.loading?e._e():s("h3",{staticClass:"fw5 dark-gray tc"},[e._v("No results found.")])],2)])},staticRenderFns:[]};var ke=s(0)(Ce,Ee,!1,function(e){s(154)},"data-v-438cbc71",null).exports,Ie={name:"login",metaInfo:{title:"Dashboard"},data(){return{username:this.$store.state.expiredSession||"",password:"",formError:"",loading:!1}},computed:{expiredSession(){return this.$store.state.expiredSession}},methods:{async login(){const e=this.username,t=this.password,s=this.$store,a=this.$router,i=this.$route;this.formError=null,this.loading=!0;try{await s.dispatch("login",{username:e,password:t}),a.replace(i.query.next||"/")}catch(e){this.formError="string"==typeof e.message?e.message:e.data.message,this.loading=!1}}},mounted(){this.expiredSession&&this.$el.querySelector('input[name="password"]').focus()}},$e={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"relative overflow-hidden login-container"},[s("div",{staticClass:"w-100 ph5 pv3 center absolute z-2"},[s("h1",{staticClass:"tc white f1 mb0"},[e._v("NekoPlay!")]),e._v(" "),s("h2",{staticClass:"tc white fw5 mt1 mb2"},[e._v("Watch anime for free")]),e._v(" "),s("br"),e._v(" "),s("br"),e._v(" "),s("br"),e._v(" "),s("br"),e._v(" "),s("form",{staticClass:"measure center bg-white shadow-2 br2 pa3",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[e.formError?s("span",{staticClass:"dark-red mb2 dib"},[e._v(e._s(e.formError))]):e._e(),e._v(" "),e.expiredSession?e._e():s("legend",{staticClass:"f4 fw6 ph0 mt0 mb1"},[e._v("Click for acess the page")]),e._v(" "),s("fieldset",{staticClass:"ba b--transparent ph0 mh0 pb2"},[s("div",[s("label",{staticClass:"db fw6 lh-copy f6 dark-gray",staticStyle:{display:"none"},attrs:{for:"username"}},[e._v("Username / Email")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"pa2 input-reset ba b--black-20 br1 bg-transparent w-100",staticStyle:{display:"none"},attrs:{type:"text",name:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"mv3"},[s("label",{staticClass:"db fw6 lh-copy f6 dark-gray",staticStyle:{display:"none"},attrs:{for:"password"}},[e._v("Password")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"b pa2 input-reset ba b--black-20 br1 bg-transparent w-100",staticStyle:{display:"none"},attrs:{type:"password",name:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),e._v(" "),s("div",[s("input",{staticClass:"fw6 ph3 pv2 input-reset ba b--black-20 bg-white bg-animate hover-bg-blue black hover-white br2 box-shadow-umi pointer f6 dib w-100",attrs:{type:"submit"},domProps:{value:e.loading?"Opening...":"Open"}})])])])])},staticRenderFns:[]};var Ae=s(0)(Ie,$e,!1,function(e){s(156)},"data-v-6c43fe01",null).exports,Se={name:"collection",props:["id","hide","sort"],data:()=>({loading:!0}),components:{MediaItem:G,LoadingMediaItem:ve},computed:{media(){const e=this.$store,t=this.id;return e.state.collectionMedia[t]},sortedMedia(){return this.media?"old"===this.sort?this.media:this.media.slice(0).reverse():[]}},watch:{async hide(e){e||(await this.$store.dispatch("getMediaForCollection",this.id),this.loading=!1)}},async beforeMount(){this.hide||(await this.$store.dispatch("getMediaForCollection",this.id),this.loading=!1)}},Te={render:function(){var e=this.$createElement,t=this._self._c||e;return this.hide?this._e():t("div",[this.loading?t("div",{staticClass:"center container-width"},this._l(15,function(e){return t("loading-media-item",{key:e})}),1):this._l(this.sortedMedia,function(e){return t("media-item",{key:e,attrs:{id:e,size:"medium"}})})],2)},staticRenderFns:[]},Le=s(0)(Se,Te,!1,null,null,null).exports,xe={name:"queue-button",props:["id"],computed:{inQueue:{get(){const e=this.$store.state.series;return!!e[this.id]&&e[this.id].in_queue},set(e){this.$store.dispatch("updateSeriesQueue",{id:this.id,queueStatus:e})}}}},Re={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"f6 fw6 dib ba b--black-20 bg-white bg-animate hover-bg-light-gray black br2 pointer ph2 pv1 box-shadow-umi",on:{click:function(t){e.inQueue=!e.inQueue}}},[e._v(e._s(e.inQueue?"Remove from queue":"Add to queue"))])},staticRenderFns:[]},De=s(0)(xe,Re,!1,null,null,null).exports;const Oe="http://img1.ak.crunchyroll.com/";function Pe(e){return"string"!=typeof e?e:e.indexOf(Oe)>-1?e.replace(Oe,"/cdn/"):e}const Me={269071:"konosuba",42852:"Naruto: Shippuden"};var Ue={name:"series",metaInfo(){return{title:this.series?this.series.name:"Loading..."}},components:{Collection:Le,QueueButton:De},data(){return{selectedCollection:"",sort:localStorage.getItem(`series-${this.$route.params.id}-sort`)||"new",seriesError:!1,opening:null,playing:!1,loading:!0}},computed:{seriesId(){return this.$route.params.id},series(){const e=this.$store;return this.loading?{landscape_image:{},portrait_image:{}}:e.state.series[this.seriesId]},collections(){return this.$store.state.seriesCollections[this.seriesId]},sortedCollections(){return"old"===this.sort?this.collections:this.collections.slice(0).reverse()},collectionData(){return this.$store.state.collections},videoBannerStyle(){return{"background-image":`url(${Pe(this.series.landscape_image.full_url)})`}}},methods:{async getSeriesInfo(){const e=this.$store;try{await e.dispatch("getSeriesInfo",this.seriesId),this.loading=!1,await e.dispatch("getCollectionsForSeries",this.series.series_id),this.selectedCollection=this.sortedCollections[0],this.getOpening()}catch(e){this.seriesError=!0}},async getOpening(){const e=Me[this.seriesId]||this.series.name;const t=(await E.a.get(`https://umi-watch-api.now.sh/opening?search=${e}`)).data.result;this.opening=t},selectCollection({target:e}){this.selectedCollection!==e.dataset.id?this.selectedCollection=e.dataset.id:this.selectedCollection=-1},sortCollection({target:e}){this.sort=e.dataset.sort,this.selectedCollection=this.sortedCollections[0],localStorage.setItem(`series-${this.seriesId}-sort`,e.dataset.sort)},intersectCallback([e]){this.header.classList.add("bg-animate"),e.isIntersecting?this.header.classList.add("alt-header"):this.header.classList.remove("alt-header")}},watch:{seriesId(e){this.opening=null,this.playing=!1,this.seriesError=!1,this.loading=!0,this.getSeriesInfo()}},created(){this.getSeriesInfo()},mounted(){if("function"==typeof window.IntersectionObserver){this.header=document.querySelector("header"),this.intersect=new IntersectionObserver(this.intersectCallback,{threshold:[0,1]});const e=document.querySelector("#video-banner");this.intersect.observe(e)}},beforeDestroy(){this.intersect&&(this.header.classList.remove("bg-animate"),this.intersect.disconnect())}},Ne={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.seriesError?s("div",[s("h1",{staticClass:"fw6"},[e._v("This series is not available.")])]):e._e(),e._v(" "),s("div",{staticClass:"absolute w-100 top-0 left-0 overflow-hidden video-banner-height",attrs:{id:"video-banner"}},[e.opening?s("video",{staticClass:"w-100 absolute top-0",attrs:{src:e.opening,loop:"",autoplay:""},domProps:{muted:!0},on:{playing:function(t){e.playing=!0}}}):e._e(),e._v(" "),s("div",{staticClass:"w-100 cover bg-center absolute video-banner",class:{away:e.playing},style:e.videoBannerStyle}),e._v(" "),s("div",{staticClass:"w-100 bg-black o-40 absolute video-banner-height"})]),e._v(" "),s("div",{staticClass:"relative z-9999 info-container"},[s("div",{staticClass:"cf"},[s("div",{staticClass:"w-20 fl pt2"},[s("img",{staticClass:"shadow-1 bg-light-gray portrait-image",attrs:{src:e._f("cdnRewrite")(e.series.portrait_image.full_url)}})]),e._v(" "),s("div",{staticClass:"w-80 fl pl3"},[s("h1",{staticClass:"series-title white fw6"},[e._v(e._s(e.series.name||" "))]),e._v(" "),s("p",{staticClass:"lh-copy mt4"},[e._v(e._s(e.series.description))]),e._v(" "),e.loading?s("div",{staticClass:"center tc"},[s("i",{staticClass:"fa fa-circle-o-notch fa-spin fa-3x silver mt3"})]):s("div",[s("queue-button",{attrs:{id:e.series.series_id}}),e._v(" "),s("a",{staticClass:"link f6 fw6 dib ba b--black-20 bg-white bg-animate hover-bg-light-gray black br2 box-shadow-umi pointer ph2 pv1",attrs:{target:"_blank",href:"https://anilist.co/search/anime?sort=SEARCH_MATCH&search="+encodeURIComponent(e.series.name)}},[e._v("Find on AniList")])],1)])]),e._v(" "),e.loading?e._e():s("div",{staticClass:"relative"},[s("div",{staticClass:"absolute right-0 bottom-0"},[s("div",{staticClass:"fw5 ph3 pv2 bg-white pointer f6 dib",class:{"bb bw1 b--blue":"old"===e.sort},attrs:{"data-sort":"old"},on:{click:e.sortCollection}},[e._v("Oldest")]),e._v(" "),s("div",{staticClass:"fw5 ph3 pv2 bg-white pointer f6 dib",class:{"bb bw1 b--blue":"new"===e.sort},attrs:{"data-sort":"new"},on:{click:e.sortCollection}},[e._v("Newest")])])]),e._v(" "),e.collections&&!e.loading?s("div",e._l(e.sortedCollections,function(t){return s("div",{key:t},[s("div",{staticClass:"collection-header bg-near-white cf pa3 mv2 pointer br2 box-shadow-umi",attrs:{"data-id":t},on:{click:e.selectCollection}},[s("div",{staticClass:"fl"},[s("span",{staticClass:"fw6"},[e._v(e._s(e.collectionData[t].name))])]),e._v(" "),s("div",{staticClass:"fr"},[s("i",{staticClass:"fa",class:["fa-caret-"+(e.selectedCollection===t?"up":"down")],attrs:{"aria-hidden":"true"}})])]),e._v(" "),s("collection",{staticClass:"center container-width",attrs:{id:t,hide:e.selectedCollection!==t,sort:e.sort}})],1)}),0):e._e()])])},staticRenderFns:[]};var He=s(0)(Ue,Ne,!1,function(e){s(157)},"data-v-496b979c",null).exports;function je(e){const t=Math.floor(e/60),s=e-60*t;return`${t}:${s<10?"0":""}${s}`}var qe=s(38),Fe=s.n(qe),Ye=s(161),ze=s.n(Ye),Be=s(162),Qe=s.n(Be),We=s(163),Ve=s.n(We);var Ge=[{name:"UmiDorito",image:s(164)},{name:"Yousoro",image:s(165)},{name:"NicoDab",id:"160850"},{name:"TaigaSalute",id:"100852"},{name:"FeelsNicoMan",id:"145817"},{name:"UmiShock",id:"164005"},{name:"MeguminLewd",id:"94859"},{name:"MakiWut",id:"130634"},{name:"KotoHai",id:"124003"},{name:"NozomiSmug",id:"129796"},{name:"MichiruSmug",id:"161817"},{name:"NUT!",id:"142253"},{name:"MayoiSmug",id:"116048"},{name:"MeguSmug",id:"116299"},{name:"CoryZ",id:"126423"},{name:"AkkoWAT",id:"189954"},{name:"Kininarimasu",id:"48007"},{name:"MioTea",id:"108483"},{name:"ShinobuThump",id:"114429"},{name:"RikoREEE",id:"141367"},{name:"AobaSalute",id:"138590"},{name:"A N G E R Y",id:"154339"},{name:"Yohane!!",id:"164768"},{name:"NyatLikeThis",id:"134861"},{name:"GnomeChild",id:"43562"},{name:"KumikoW",id:"92979"},{name:"FelixThink",id:"199843"},{name:"FrostyFridays",image:s(166)},{name:"Tsuyu~~",image:s(167)}],Ke=s(168),Je=s.n(Ke),Xe={data:()=>({emoji:Ge}),computed:{lights(){return this.$store.state.lights}},methods:{handleEmojiClick(e){this.$emit("emoji",e.target.id)}}},Ze={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.emoji,function(t){return s("img",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom-center",value:t.name,expression:"e.name",modifiers:{"bottom-center":!0}}],key:t.name,staticClass:"emoji pointer grow dib mr1",attrs:{id:t.name,src:t.image?t.image:"https://cdn.frankerfacez.com/emoticon/"+t.id+"/1"},on:{click:e.handleEmojiClick}})}),0)},staticRenderFns:[]},et=s(0)(Xe,Ze,!1,null,null,null).exports;const tt=Je()();var st={name:"video",props:["data","poster","bif","id","seek","duration"],components:{Reactotron:et},data:()=>({playerInit:!1,showBlur:!0,firstEmoji:!1,frames:[]}),computed:{streamUrl(){return this.data.streams[0].url},room(){return this.$store.state.roomId},lights(){return this.$store.state.lights},roomData(){return this.$store.state.roomData},connectedCount(){return this.$store.state.connectedCount},roomConnected(){return this.$store.state.roomConnected},roomHostOnly(){return this.roomData.hostOnly}},mounted(){const e=this;this.playerInit=!0,this.player=new Fe.a.Player({parent:this.$el.querySelector("#player"),width:"1024px",height:"576px",source:this.streamUrl,poster:this.poster,disableVideoTagContextMenu:!0,plugins:[ze.a,Qe.a],levelSelectorConfig:{title:"Quality",labels:{4:"1080p",3:"720p",2:"480p",1:"360p",0:"240p"}},scrubThumbnails:{backdropHeight:null,spotlightHeight:84,thumbs:[]},events:{onReady(){if(e.container)return this.core.el.appendChild(e.container);e.container=document.createElement("div"),e.reactions=document.createElement("div"),e.reactions.className="reaction-canvas absolute absolute--fill z-9999 tl",e.tron=e.$el.querySelector(".reactotron").cloneNode(!0),e.tron.className=`${e.tron.className.replace("disabled","")} z-max player-tron`,Array.from(e.tron.querySelectorAll("img")).forEach(t=>{t.onclick=e.handleEmoji.bind(e,t.id,!0)}),e.container.appendChild(e.reactions),e.container.appendChild(e.tron),this.core.el.appendChild(e.container)}}}),this.playback=this.player.core.getCurrentContainer().playback,this.player.on(Fe.a.Events.PLAYER_ENDED,()=>{this.showBlur=!0,this.logTime(null,this.duration),this.$emit("ended")}),this.player.on(Fe.a.Events.PLAYER_PLAY,()=>{this.showBlur=!1,this.$emit("play"),this.$store.state.roomConnected&&!this.$store.getters.isRoomHost&&(this.player.configure({chromeless:this.roomHostOnly,allowUserInteraction:!this.roomHostOnly}),this.updatePlayerElements())}),this.player.on(Fe.a.Events.PLAYER_PAUSE,()=>{this.logTime()}),this.seek&&0!==this.seek&&this.player.seek(this.seek),this.$route.query.joinRoom?this.wsJoinRoom():""!==this.room&&this.wsRegisterEvents(),this.bif&&this.loadBif()},watch:{data(){this.showBlur=!0,this.player.configure({source:this.streamUrl,poster:this.poster}),this.playback=this.player.core.getCurrentContainer().playback,""!==this.room&&(this.playback.on(Fe.a.Events.PLAYBACK_PLAY_INTENT,this.wsHandlePlay),this.$store.dispatch("updateRoomData",{playing:!1,syncedTime:0}),this.playback.on(Fe.a.Events.PLAYBACK_PLAY_INTENT,this.roomHandlePlay)),this.loadBif()},room(e){""===e?this.wsDestroy():this.wsRegisterEvents()},id(e,t){this.logTime(t)},seek(){0!==this.seek&&(this.player.seek(this.seek),this.player.play())},roomData(e,t){e.playing!==t.playing&&e.playing!==this.player.isPlaying()&&this.player[e.playing?"play":"pause"](),e.syncedTime!==t.syncedTime&&e.syncedTime!==this.player.getCurrentTime()&&this.player.seek(e.syncedTime)},connectedCount(e,t){""!==this.room&&e>t&&this.$store.dispatch("updateRoomData",{syncedTime:this.player.getCurrentTime(),playing:this.player.isPlaying()})},roomHostOnly(e){this.$store.getters.isRoomHost||(this.player.configure({chromeless:e,allowUserInteraction:!e}),this.updatePlayerElements())}},methods:{handleInputClick({target:e}){e.select()},logTime(e,t){const s=t||this.player.getCurrentTime();if(0!==s){const t=new FormData;t.append("session_id",this.$store.state.auth.session_id),t.append("event","playback_status"),t.append("playhead",s),t.append("media_id",e||this.id),t.append("locale",k()),t.append("version",I),S({method:"post",route:"log",data:t})}},handleFullscreen(e){const t=e?"add":"remove";this.tron.classList[t]("full")},handleShowControls(){this.tron.classList.add("show")},handleHideControls(){this.tron.classList.remove("show")},handleEmoji(e,t){t&&this.player.core.showMediaControl(),this.$firebase.getRef(`roomEmoji/${this.room}`).transaction(()=>({name:e,eventId:w()()}))},displayEmoji(e){if(!e.exists()||!this.firstEmoji)return void(this.firstEmoji=!0);const t=e.val().name,s=Ge.find(e=>e.name===t);if(!s)return;const a=this.player.core.el,i=document.createElement("img"),o=Ve.a.random(0,a.clientHeight-25);i.className="emoji absolute",i.style.transform=`translateX(${a.clientWidth+50}px) translateY(${o}px)`,i.src=s.image?s.image:`https://cdn.frankerfacez.com/emoticon/${s.id}/1`,this.reactions.appendChild(i),Ve()({targets:i,translateX:-35,translateY:[{value:`+=${Math.random()>.5?-15:15}`,easing:"easeInOutSine"},{value:`+=${Math.random()>.5?-15:15}`,easing:"easeInOutSine"},{value:`+=${Math.random()>.5?-15:15}`,easing:"easeInOutSine"}],easing:"linear",duration:1750,complete:()=>{this.reactions.removeChild(i)}})},async loadBif(){const e=this.player.getPlugin("scrub-thumbnails");this.frames.length>0&&e.removeThumbnail(this.frames),this.frames=await tt.parse(this.bif),this.frames.length>0&&e.addThumbnail(this.frames)},wsJoinRoom(){var e=this.roomData;const t=e.syncedTime,s=e.playing;this.$store.getters.isRoomHost||this.player.configure({chromeless:this.roomHostOnly,allowUserInteraction:!this.roomHostOnly}),t>0&&this.player.seek(t),s&&this.player.play(),this.$router.replace({path:this.$route.path,query:{roomId:this.room}}),this.wsRegisterEvents()},async wsRegisterEvents(){this.playback.on(Fe.a.Events.PLAYBACK_PLAY_INTENT,this.roomHandlePlay),this.player.on(Fe.a.Events.PLAYER_PAUSE,this.roomHandlePause),this.player.on(Fe.a.Events.PLAYER_SEEK,this.roomHandleSeek),this.player.on(Fe.a.Events.PLAYER_FULLSCREEN,this.handleFullscreen),this.player.core.mediaControl.on(Fe.a.Events.MEDIACONTROL_SHOW,this.handleShowControls),this.player.core.mediaControl.on(Fe.a.Events.MEDIACONTROL_HIDE,this.handleHideControls),await this.$firebase.init(),this.$firebase.getRef(`roomEmoji/${this.room}`).on("value",this.displayEmoji)},roomHandlePause(){this.$store.dispatch("updateRoomData",{playing:!1,syncedTime:this.player.getCurrentTime()})},roomHandlePlay(){this.$store.dispatch("updateRoomData",{playing:!0})},roomHandleSeek(e){e!==this.roomData.syncedTime&&this.$store.dispatch("updateRoomData",{syncedTime:e})},wsDestroy(){this.$firebase.getRef(`roomEmoji/${this.room}`).off("value",this.displayEmoji),this.playback.off(Fe.a.Events.PLAYBACK_PLAY_INTENT,this.roomHandlePlay),this.player.off(Fe.a.Events.PLAYER_PAUSE,this.roomHandlePause),this.player.off(Fe.a.Events.PLAYER_SEEK,this.roomHandleSeek),this.player.off(Fe.a.Events.PLAYER_FULLSCREEN,this.handleFullscreen),this.player.core.mediaControl.off(Fe.a.Events.MEDIACONTROL_SHOW,this.handleShowControls),this.player.core.mediaControl.off(Fe.a.Events.MEDIACONTROL_HIDE,this.handleHideControls)},updatePlayerElements(){if(this.showBlur)return;const e=this.roomHostOnly?"hide":"show";this.player.core.mediaControl.enable(),this.player.core.mediaControl.$playPauseToggle[e](),this.player.core.mediaControl.$seekBarContainer[e]()}},beforeDestroy(){this.logTime(),this.player.destroy()}},at={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pv2"},[s("div",{staticClass:"bg-black w-100 absolute left-0 z-9999 player-top-offset",class:{"shadow-2":e.lights},attrs:{id:"player"}},[e.playerInit&&e.showBlur&&!e.lights?s("div",{staticClass:"w-100 player-height absolute top-0 left-0 overflow-hidden o-80"},[s("img",{staticClass:"player-background",attrs:{src:e._f("cdnRewrite")(e.poster),draggable:"false"}})]):e._e()]),e._v(" "),e.playerInit?e._e():s("div",{staticClass:"bg-black absolute w-100 left-0 player-height player-top-offset"},[s("div",{staticClass:"bg-dark-gray center player-width player-height"})]),e._v(" "),s("reactotron",{directives:[{name:"show",rawName:"v-show",value:""!==e.room,expression:"room !== ''"}],staticClass:"dib v-mid ml1 nowrap overflow-hidden reactotron relative z-9999",class:{disabled:!e.roomConnected},on:{emoji:e.handleEmoji}})],1)},staticRenderFns:[]};var it=s(0)(st,at,!1,function(e){s(159),s(160)},"data-v-0ea5d967",null).exports,ot={props:["ids","selected"],components:{MediaItem:G},mounted(){if(this.selected){const e=this.$el.querySelector(`[data-id="${this.selected}"]`).getBoundingClientRect();this.$el.scrollLeft=e.left-this.$el.offsetWidth,this.$el.scrollLeft>this.$el.offsetWidth&&(this.$el.scrollLeft=this.$el.scrollLeft+250)}}},rt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"overflow-x-scroll nowrap ph1"},e._l(e.ids,function(t){return s("media-item",{key:t,attrs:{id:t,"data-id":t,selected:t===e.selected,size:"small"}})}),1)},staticRenderFns:[]},nt=s(0)(ot,rt,!1,null,null,null).exports;var lt={name:"media",metaInfo(){return{title:this.media?`Episode ${this.media.episode_number}: ${this.media.name} — ${this.media.collection_name}`:"Loading..."}},components:{"umi-video":it,MediaItem:G,EpisodeScroller:nt,Reactotron:et},data:()=>({streamData:{},internalSeek:0,seek:0,nextEpisode:!1,collectionLoaded:!1,aniListItem:{},aniListSynced:!1,timeout:0,loading:!1}),computed:{media(){const e=this.$store,t=this.$route;return e.state.media[t.params.id]},mediaId(){return this.$route.params.id},collectionMedia(){const e=this.$store;return this.media?e.state.collectionMedia[this.media.collection_id]:[]},room(){return this.$store.state.roomId},collection(){return this.media?this.$store.state.collections[this.media.collection_id]:null},nextEpisodeId(){return this.collectionLoaded&&Object.keys(this.$store.state.media).find(e=>{if(!this.media)return!1;const t=this.$store.state.media[e];return t.collection_id===this.media.collection_id&&parseInt(t.episode_number,10)===parseInt(this.media.episode_number,10)+1})||""},nextEpisodeMedia(){return this.$store.state.media[this.nextEpisodeId]},lights(){return this.$store.state.lights},alAuth(){return this.$store.state.alAuth},isAniListAuthed(){return!!this.$store.state.alAuth.name},poster(){return this.media&&this.media.screenshot_image?Pe(this.media.screenshot_image.full_url):""},prettyTime(){return je(this.internalSeek)},shouldContinueWatching(){return this.$store.state.roomConnected&&this.$store.state.roomData.hostOnly?0!==this.internalSeek&&this.media.duration-this.internalSeek>=30&&this.$store.getters.isRoomHost:0!==this.internalSeek&&this.media.duration-this.internalSeek>=30},shouldNextEpisode(){return this.nextEpisode&&""!==this.nextEpisodeId},duration(){return je(this.media.duration)},optionClasses(){return[this.lights?"white b--white-60 hover-bg-transparent":"black b--black-20 hover-bg-light-gray bg-animate"]},relativeEpisodeNumber(){return this.collectionMedia.indexOf(this.media.media_id.toString())+1}},methods:{async getMediaInfo(){const e=this.$store,t=this.$route;if(this.loading=!0,await e.dispatch("getMediaInfo",t.params.id),S({route:"info",params:{session_id:e.state.auth.session_id,media_id:t.params.id,fields:"media.stream_data"}}).then(e=>{this.streamData=e.data.data.stream_data,this.loading=!1,this.seek=0,this.internalSeek=this.media.playhead}),await e.dispatch("getMediaForCollection",this.media.collection_id),this.collectionLoaded=!0,this.isAniListAuthed){var s=(await E()({method:"POST",url:"https://graphql.anilist.co",headers:{Authorization:`Bearer ${this.alAuth.token}`},data:{query:"\n  query FetchMediaInfo ($search: String!) {\n    Media (search: $search, type: ANIME) {\n      id\n      siteUrl\n      mediaListEntry {\n        id\n        progress\n      }\n    }\n  }\n",variables:{search:this.media.collection_name}}})).data;const e=s.data;s.errors;e.Media&&(this.aniListItem=e.Media,this.aniListItem.mediaListEntry&&this.aniListItem.mediaListEntry.progress>=this.relativeEpisodeNumber&&(this.aniListSynced=!0))}},playerPlay(){this.internalSeek=0,this.nextEpisode=!1,this.isAniListAuthed&&this.aniListItem.id&&0===this.timeout&&!this.aniListSynced&&!0&&(this.timeout=setTimeout(async()=>{try{const e=this.relativeEpisodeNumber===this.collectionMedia.length&&this.collection.complete?"COMPLETED":"CURRENT";const t=(await E()({method:"post",url:"https://graphql.anilist.co",headers:{Authorization:`Bearer ${this.alAuth.token}`},data:{query:"\n  mutation UpdateMediaList ($id: Int, $mediaId: Int, $status: MediaListStatus!, $progress: Int!) {\n    SaveMediaListEntry (id: $id, mediaId: $mediaId, status: $status, progress: $progress) {\n      id\n      progress\n    }\n  }\n",variables:{id:this.aniListItem.mediaListEntry?this.aniListItem.mediaListEntry.id:null,mediaId:this.aniListItem.id,status:e,progress:this.relativeEpisodeNumber}}})).data.data;this.aniListSynced=!0,this.aniListItem.mediaListEntry=t}catch(e){this.aniListSynced=!1}},12e4))},continueWatching(){this.seek=this.internalSeek,this.internalSeek=0},playerEnded(){this.nextEpisode=!0;const e=Object.assign({},this.media,{playhead:this.media.duration});this.$store.commit("ADD_MEDIA",e)},createRoom(){this.$store.dispatch("enterRoom",{id:w()(),route:{name:this.$route.name,path:this.$route.path}}),this.$store.commit("UPDATE_ROOM_MENU",!0)}},watch:{mediaId(e){this.nextEpisode=!1,this.aniListSynced=!1,clearTimeout(this.timeout),this.timeout=0,this.getMediaInfo(),""!==this.room&&this.$router.replace({path:this.$route.path,query:Object.assign({},this.$route.query,{roomId:this.room})})},room(e){if(e){const t=Object.assign({},this.$route,{query:{roomId:e}});this.$router.replace(t)}else{const e=Object.assign({},this.$route,{query:{}});this.$router.replace(e)}}},created(){if(this.$route.query.roomId&&!this.room)return this.$router.replace(`/room/${this.$route.query.roomId}`);this.getMediaInfo(),""!==this.room&&this.$router.replace({path:this.$route.path,query:Object.assign({},this.$route.query,{roomId:this.room})})},beforeDestroy(){clearTimeout(this.timeout),this.timeout=0,this.$store.commit("UPDATE_LIGHTS",!1)}},ct={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"absolute w-100 bg-dark-gray top-0 left-0 header-bg"}),e._v(" "),e.media&&e.media.created?s("div",[e.loading?s("div",{staticClass:"bg-black-60 absolute absolute--fill z-max player-height player-top-offset tc"},[s("i",{staticClass:"fa fa-circle-o-notch fa-spin fa-3x white center loading-spinner"})]):e._e(),e._v(" "),e.shouldContinueWatching&&!e.loading?s("div",{staticClass:"absolute z-max player-width player-top-offset left-0 right-0 center cf white",on:{click:e.continueWatching}},[s("div",{staticClass:"fw5 f4 pa3 w-100 bg-black-60 hover-bg-black-70 bg-animate pointer absolute resume-container"},[s("i",{staticClass:"fa fa-fast-forward mr2",attrs:{"aria-hidden":"true"}}),e._v(" Resume watching at "+e._s(e.prettyTime)+"\n      ")])]):e._e(),e._v(" "),e.shouldNextEpisode?s("div",{staticClass:"absolute z-max player-width player-top-offset left-0 right-0 center cf white"},[s("router-link",{staticClass:"white",attrs:{to:"/series/"+e.nextEpisodeMedia.series_id+"/"+e.nextEpisodeMedia.media_id}},[s("div",{staticClass:"fw5 f4 pa3 w-100 bg-black-60 hover-bg-black-70 bg-animate pointer absolute hide-child next-container"},[s("div",{staticClass:"child absolute bg-black-40 tc next-episode-overlay"},[s("i",{staticClass:"fa fa-play white tc play-icon",attrs:{"aria-hidden":"true"}})]),e._v(" "),s("img",{staticClass:"v-mid bg-dark-gray next-episode-image",attrs:{src:e._f("cdnRewrite")(e.nextEpisodeMedia.screenshot_image.thumb_url)}}),e._v(" "),s("div",{staticClass:"dib v-mid ml2"},[e._v("\n            Watch next episode: "),s("br"),e._v(" Episode "+e._s(e.nextEpisodeMedia.episode_number)+" — "+e._s(e.nextEpisodeMedia.name)+"\n          ")])])])],1):e._e(),e._v(" "),e.streamData&&e.streamData.format?s("umi-video",{attrs:{duration:e.media.duration,data:e.streamData,poster:e.poster,id:e.$route.params.id,bif:e.media.bif_url,seek:e.seek},on:{play:e.playerPlay,ended:e.playerEnded}}):s("div",{staticClass:"pv2"},[s("div",{staticClass:"bg-black absolute w-100 left-0 player-height player-top-offset"},[s("div",{staticClass:"bg-dark-gray center player-width player-height"})]),e._v(" "),""!==e.room?s("reactotron",{staticClass:"dib v-mid ml1 nowrap overflow-hidden reactotron relative z-9999"}):e._e()],1),e._v(" "),s("div",{staticClass:"media-info"},[s("div",[s("h2",{staticClass:"normal lh-title mb2 w-80 dib"},[e._v(e._s(e.media.name))]),e._v(" "),s("div",{staticClass:"dib fr mt3 z-9999 relative box-shadow-umi br2 ba b--black-20"},[""===e.room?s("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom-center",value:"Watch with others",expression:"'Watch with others'",modifiers:{"bottom-center":!0}}],staticClass:"f8 fw6 dib bg-transparent black pointer ph3 pv2 br b--black-20",class:e.optionClasses,on:{click:e.createRoom}},[s("i",{staticClass:"tc fa fa-users w-1",attrs:{"aria-hidden":"true"}})]):e._e(),s("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom-center",value:"Toggle dark mode",expression:"'Toggle dark mode'",modifiers:{"bottom-center":!0}}],staticClass:"f8 fw6 dib bg-transparent black pointer ph3 pv2",class:e.optionClasses,on:{click:function(t){return e.$store.commit("UPDATE_LIGHTS",!e.lights)}}},[s("i",{staticClass:"tc fa fa-moon-o w-1",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),s("div",{staticClass:"fw6"},[s("router-link",{staticClass:"dark-gray no-underline bb pb1 b--dark-gray hover-blue link",attrs:{to:"/series/"+e.media.series_id}},[e._v("\n          "+e._s(e.media.collection_name)+"\n        ")]),e._v(" "),e.isAniListAuthed&&e.aniListItem.id?s("a",{attrs:{href:e.aniListItem.siteUrl,target:"_blank",rel:"noopener"}},[s("span",{staticClass:"mal-icon ml1",class:{watched:e.aniListSynced}})]):e._e(),e._v("\n        • Episode "+e._s(e.media.episode_number)+"\n        • "),s("i",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.duration)+"\n      ")],1),e._v(" "),s("p",{staticClass:"lh-copy"},[e._v(e._s(e.media.description))]),e._v(" "),s("h3",{staticClass:"fw5"},[e._v("Episodes")]),e._v(" "),e.collectionMedia&&e.collectionMedia.length>0?s("episode-scroller",{attrs:{ids:e.collectionMedia,selected:e.$route.params.id}}):e._e()],1)],1):s("div",[e._m(0)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pv2"},[t("div",{staticClass:"bg-black absolute w-100 left-0 player-height player-top-offset"},[t("div",{staticClass:"bg-dark-gray center player-width player-height"},[t("div",{staticClass:"bg-black-60 center player-width player-height tc"},[t("i",{staticClass:"fa fa-circle-o-notch fa-spin fa-3x white center loading-spinner"})])])])])}]};var dt=s(0)(lt,ct,!1,function(e){s(158)},"data-v-e1d4e99a",null).exports,ht={name:"room",metaInfo:{title:"Room"},data:()=>({expired:!1}),async created(){const e=this.$route.params.id;const t=(await this.$store.dispatch("enterRoom",{id:e})).route;"media"!==t.name?this.$router.replace("/"):this.$router.replace({path:t.path,query:{joinRoom:!0}})}},ut={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",{staticClass:"tc fw6"},[this._v("Joining room...")])])}]},mt=s(0)(ht,ut,!1,null,null,null).exports,pt={name:"changelog",metaInfo:{title:"Changelog"},data:()=>({installRefreshClicked:!1})},vt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",{staticClass:"fw4"},[e._v("Changelog")]),e._v(" "),s("h2",{staticClass:"fw6 f4 flex items-center update-title"},[e._v("2018-10-09: AniList integration")]),e._v(" "),e._m(0),e._v(" "),s("h2",{staticClass:"fw6 f4 flex items-center update-title"},[e._v("2018-03-27: All series work again!!")]),e._v(" "),e._m(1),e._v(" "),s("h2",{staticClass:"fw6 f4 flex items-center update-title"},[e._v("2018-02-03: Video player thumbnails & improvements")]),e._v(" "),e._m(2),e._v(" "),s("h2",{staticClass:"fw6 f4 flex items-center update-title"},[e._v("2018-01-23: Host-only mode for rooms")]),e._v(" "),e._m(3),e._v(" "),s("h2",{staticClass:"fw6 f4 flex items-center update-title"},[e._v("2017-12-08: Minor updates")]),e._v(" "),e._m(4),e._v(" "),s("h2",{staticClass:"fw6 f4 flex items-center update-title"},[e._v("2017-11-30: Rooms rewrite & more")]),e._v(" "),s("div",{staticClass:"lh-copy"},[s("ul",{staticClass:"changelog-list"},[e._m(5),e._v(" "),s("li",[s("b",{staticClass:"fw6"},[e._v("Improved update system:")]),e._v("\n        TL;DR: Updates are now installed automatically. No more ugly yellow bar.\n        "),s("div",{staticClass:"mb2"}),e._v("\n        If you've been using Umi for a while, you've probably seen this ugly bar pop up every once in a while:\n        "),s("div",{staticClass:"w100 bg-light-yellow pa3 fw6 br1 shadow-1 tc mv3"},[s("span",[e._v("An update is ready to be installed.")]),e._v(" "),s("div",{staticClass:"f6 fw5 dib ml1 ba b--black bg-transparent bg-animate hover-bg-black hover-light-yellow br1 pointer ph2 pv1 tc",on:{click:function(t){e.installRefreshClicked=!0}}},[e.installRefreshClicked?s("span",[s("img",{staticClass:"v-base mr1 nico",attrs:{src:"https://cdn.frankerfacez.com/emoticon/189751/1"}}),e._v(" "),s("span",{},[e._v("nico nico nii~~")]),e._v(" "),s("img",{staticClass:"v-base ml1 nico",attrs:{src:"https://cdn.frankerfacez.com/emoticon/189751/1"}})]):s("span",[e._v("Install and refresh")])])]),e._v("\n        As a brief explanation of why this would happen: To make Umi even faster, the website stores a copy of all its code on your device, so it doesn't need to contact the Umi servers to load. Since the website doesn't contact the server when you first open it, the website has to check for updates after it has loaded. This is when you'd get the update notification.\n        "),s("div",{staticClass:"mb2"}),e._v("\n        I setup the old system to continually check for updates, including while you were using the player. Part of this was because of the old rooms system, as it was very fickle with people leaving, so I didn't want to make it so auto-update while you in a room. Now that rooms are a lot more stable, Umi will just check for updates when you first open the site, and automatically refresh if there's an update. You'll get a notification that links you here for details on the update.\n      ")]),e._v(" "),e._m(6)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"lh-copy"},[t("ul",{staticClass:"changelog-list"},[t("li",[this._v("\n        You've probably noticed that the MyAnimeList integration hasn't been working for a while. That's because MyAnimeList shuttered their API until further notice, due to some security issues. As it still seems like it's a ways off until MyAnimeList's API is working again, I decided to integrate AniList support into Umi. It's actually a bit nicer than the MyAnimeList integration, since you do the sign-in on AniList's site, which is a lot safer for you. I hope to add back MyAnimeList once they release their new, safer API.\n      ")]),this._v(" "),t("li",[this._v("\n        Fixed an issue where an episode's timeline thumbnails weren't loading.\n      ")]),this._v(" "),t("li",[this._v("\n        As an aside: Umi hasn't been updated in a bit because I haven't been using it nearly as much, as I haven't been watching that much anime. Thankfully, Umi has been in a pretty good state since the last update. It's still a lot faster than Crunchyroll's site, even with their HTML5 player, and there haven't been any major issues. I have no timeline for any more major additions, but if inspiration strikes, you may see some more updates soon. I will make a dark mode happen at some point!\n      ")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lh-copy"},[s("ul",{staticClass:"changelog-list"},[s("li",[e._v("\n        If you've tried to use Umi for the last few weeks, you'll have noticed that new series and episodes stopped working. I initially thought this was unfixable, and published a letter wishing you all well. Well... hopefully you've come back for some reason, as I figured out a way to get it working again! It's not absolutely perfect, as it requires you to "),s("strong",[e._v("install an extension for "),s("a",{attrs:{href:"https://chrome.google.com/webstore/detail/umi-enabler/ebpgknlgpomojokdkpgphjigniicjcgc",target:"_blank"}},[e._v("Chrome")]),e._v(" or "),s("a",{attrs:{href:"https://addons.mozilla.org/en-US/firefox/addon/umi-enabler/",target:"_blank"}},[e._v("Firefox")])]),e._v(". However, unlike many other extensions that hook into Crunchyroll, I don't need to grab your credentials in the extension, so it satisfies my personal safety requirements. (The quick technical rundown is that it just changes the CORS headers on the incoming video responses.)\n      ")]),e._v(" "),s("li",[e._v("\n        In other news, I teased to some people that I may work on a desktop app of Umi that also works with sites like Funimation and HiDive. I'm still planning to work on this eventually! I may also be able to make it work in the browser as well, thanks to this Chrome extension, but I wouldn't hold my breath on it. I wanted to release this extension now though, so that people can continue to use Umi. Happy watching!\n      ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"lh-copy"},[t("ul",{staticClass:"changelog-list"},[t("li",[this._v("\n        When you hover across the timeline of a video, previews of the video at that time will appear!\n      ")]),this._v(" "),t("li",[this._v("\n        You'll no longer get any HTTPS errors when using Umi. All communication to the Crunchyroll servers was done over HTTPS, but stuff like the posters for a series or thumbnails of an episode were over HTTP, as Crunchyroll only serves them over HTTP. (2018!) I'm now proxying their CDN, so it will be HTTPS.\n      ")]),this._v(" "),t("li",[this._v("\n        Dropped support for some older browsers, which allows the code to be a bit smaller and hopefully a tiny bit faster.\n      ")]),this._v(" "),t("li",[this._v("\n        Fix a bug with the message shown in host-only mode showing if you overscrolled upwards (possible with a trackpad on Mac/iOS, maybe Windows too but I only have a desktop PC).\n      ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"lh-copy"},[t("ul",{staticClass:"changelog-list"},[t("li",[this._v("\n        As the title implies, rooms now have a new feature: "),t("strong",[this._v("Host-only mode.")]),this._v(" If you create a room, you'll now see a checkbox for this mode in the room popup. When toggled on, only you (the host) will be able to play/pause/change episode/etc. This is useful if you're doing a large group watch, and don't want people accidentally (or purposely 😈) messing with the video. It might still be a little rough around the edges, so if you find any bugs, please let me know "),t("a",{attrs:{href:"https://github.com/remixz/umi/issues",target:"_blank"}},[this._v("on GitHub")]),this._v(". Happy watching!\n      ")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lh-copy"},[s("ul",{staticClass:"changelog-list"},[s("li",[e._v("\n        Umi will now prompt you if you need to sign in again due to your session expiring. A session might expire if you change your password, or if you don't use Umi for a little while.\n        "),s("ul",{staticClass:"mv1"},[s("li",[e._v("This fixes a bug where your queue and history data wouldn't load properly.")])])]),e._v(" "),s("li",[e._v("\n        Improve player time syncing in rooms.\n      ")]),e._v(" "),s("li",[e._v("\n        Fix bug where language settings wouldn't load properly.\n      ")]),e._v(" "),s("li",[e._v("\n        Fix reaction selector being blurry when in fullscreen.\n      ")]),e._v(" "),s("li",[e._v("\n        Minor design updates.\n      ")]),e._v(" "),s("li",[e._v("\n        Happy holidays! "),s("img",{staticClass:"v-mid",attrs:{src:"https://cdn.frankerfacez.com/emoticon/108591/1"}})])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("b",{staticClass:"fw6"},[this._v("Rooms rewrite:")]),this._v("\n        The rooms system has been completely rewritten from the ground up. You can "),t("a",{attrs:{href:"https://github.com/remixz/umi/pull/5",target:"_blank"}},[this._v(" read the technical details here")]),this._v(" if you're interested, but the gist of it is that the rooms are going to be much more reliable. One of the biggest changes as a result of this is that rooms no longer expire. This means you can now reuse old links! The link won't remember what you're watching last once everyone has left the room, but now you and your friends can just join a link whenever. This update also sets up Umi for some future improvements, like moderators, private rooms, custom links, and more.\n      ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("b",{staticClass:"fw6"},[e._v("What's next:")]),e._v("\n        I'm generally pretty happy with how Umi has progressed so far, and I hope you're enjoying using it. I do still have some ideas for the future though! Here are some, in no particular order of adding them:\n        "),s("ul",{staticClass:"mv1"},[s("li",[e._v("\n            Spoilers mode (hides all thumbnails and episode titles)\n          ")]),e._v(" "),s("li",[e._v("\n            Improved rooms (moderators, private rooms, custom links)\n          ")]),e._v(" "),s("li",[e._v("\n            Support for additional streaming sites\n          ")]),e._v(" "),s("li",[e._v("\n            Offline support (if Crunchyroll adds it; technically Umi will load now if you're offline)\n          ")]),e._v(" "),s("li",[e._v("\n            Improved reactions (choose custom reactions instead of the default set)\n          ")])]),e._v("\n        If you have any suggestions or ideas for Umi, feel free to add them as issues "),s("a",{attrs:{href:"https://github.com/remixz/umi/issues",target:"_blank"}},[e._v("on GitHub.")]),e._v(" Happy watching!\n      ")])}]};var ft=s(0)(pt,vt,!1,function(e){s(170)},"data-v-2eb71f50",null).exports,gt={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",{staticClass:"fw6 f2 mb0"},[this._v("The Future of Umi")]),this._v(" "),t("h2",{staticClass:"f5 gray fw4 mt1"},[this._v("March 21st, 2018")]),this._v(" "),t("hr"),this._v(" "),t("div",{staticClass:"lh-copy"},[t("p",[this._v("\n      Hi there! I'm kaway404, the guy who created this site.\n    ")]),this._v(" "),t("img",{staticClass:"db center",attrs:{src:"https://orig10.deviantart.net/6379/f/2016/028/e/1/umi_by_ichigo_love_design-d9ppin0.gif"}})])])}]},_t=s(0)({name:"thank-you",metaInfo:{title:"The Future of Umi"}},gt,!1,null,null,null).exports;a.default.use(p.a),a.default.use(f.a);const bt=new p.a({mode:"history",scrollBehavior:(e,t,s)=>s||{x:0,y:0},routes:[{path:"/",name:"dashboard",component:Z,beforeEnter:T},{path:"/migrate",name:"migrate",component:se},{path:"/queue",name:"queue",component:de,beforeEnter:T},{path:"/settings",name:"settings",component:me,beforeEnter:T},{path:"/history",name:"history",component:_e,beforeEnter:T},{path:"/login",name:"login",component:Ae,beforeEnter:function(e,t,s){j.state.auth.username?s("/"):s()}},{path:"/search",name:"search",component:ke,beforeEnter:T},{path:"/series/:id",name:"series",component:He,beforeEnter:T},{path:"/series/:seriesId/:id",name:"media",component:dt,beforeEnter:T},{path:"/room/:id",name:"room",component:mt,beforeEnter:T},{path:"/changelog",name:"changelog",component:ft,beforeEnter:T},{path:"/future-of-umi",name:"future-of-umi",component:_t}]});bt.beforeEach((e,t,s)=>{if(j.state.roomConnected&&j.state.roomData.hostOnly&&!j.getters.isRoomHost&&e.name!==t.name)return j.dispatch("flashGuestMessage"),s(!1);t.name&&t.name!==e.name&&(A.cancel("User changed page"),A=C.CancelToken.source()),s()}),a.default.use(_.a,{id:"UA-46859303-4",router:bt});var yt=bt,wt=s(171),Ct=s(172),Et=s.n(Ct);a.default.use(Et.a),a.default.use(P),Object(wt.sync)(j,yt),a.default.filter("cdnRewrite",Pe),new a.default({el:"#app",router:yt,store:j,render:e=>e(m)});{const e=s(175);e.install({onUpdateReady(){e.applyUpdate()},onUpdated(){localStorage.setItem("updated",Date.now()),location.reload()}})}},96:function(e,t){},98:function(e,t){},99:function(e,t){}},[61]);